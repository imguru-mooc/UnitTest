# ğŸ§ª C# Moq ì™¸ë¶€ ì˜ì¡´ì„± ì²˜ë¦¬ ë”°ë¼í•˜ê¸° ì‹¤ìŠµ (ìƒì„¸ ë²„ì „)

## í…ŒìŠ¤íŠ¸ ë”ë¸” ê°œë…, Moq í”„ë ˆì„ì›Œí¬ í™œìš©, API ë° ë°ì´í„°ë² ì´ìŠ¤ ì˜ì¡´ì„± ê²©ë¦¬ í…ŒìŠ¤íŠ¸ ì „ëµ

> **ì‹¤ìŠµ í™˜ê²½**: Visual Studio 2017 / 2019 / 2022  
> **í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬**: NUnit 3.x + Moq 4.x  
> **ì˜ˆìƒ ì†Œìš” ì‹œê°„**: ì•½ 120ë¶„

---

## ğŸ“‹ ëª©ì°¨

- Part 1: í…ŒìŠ¤íŠ¸ ë”ë¸” ê°œë… (Step 1-10)
- Part 2: í”„ë¡œì íŠ¸ ì„¤ì • (Step 11-16)
- Part 3: ì¸í„°í˜ì´ìŠ¤ ì„¤ê³„ (Step 17-21)
- Part 4: ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ êµ¬í˜„ (Step 22-27)
- Part 5: Moq ê¸°ë³¸ ì‚¬ìš©ë²• (Step 28-33)
- Part 6: Setup ì‹¬í™” (Step 34-39)
- Part 7: Verify ê²€ì¦ (Step 40-47)
- Part 8: ì‹¤ì „ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ (Step 48-52)
- Part 9: ê³ ê¸‰ ê¸°ëŠ¥ (Step 53-56)
- Part 10: ì „ì²´ ì½”ë“œ ì •ë¦¬ (Step 57-60)

---

# Part 1: í…ŒìŠ¤íŠ¸ ë”ë¸” ê°œë…

---

## 1. ì‹¤ìŠµ ê°œìš”

### ğŸ¯ ì´ ì‹¤ìŠµì˜ ëª©í‘œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  í•™ìŠµ ëª©í‘œ                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  âœ… í…ŒìŠ¤íŠ¸ ë”ë¸”ì˜ ê°œë…ê³¼ ì¢…ë¥˜ ì´í•´                             â”‚
â”‚     (Dummy, Stub, Spy, Mock, Fake)                            â”‚
â”‚                                                                â”‚
â”‚  âœ… Moq í”„ë ˆì„ì›Œí¬ ì„¤ì¹˜ ë° ì„¤ì •                                â”‚
â”‚                                                                â”‚
â”‚  âœ… Mock ê°ì²´ ìƒì„± ë° Setup                                    â”‚
â”‚                                                                â”‚
â”‚  âœ… Verifyë¡œ ë©”ì„œë“œ í˜¸ì¶œ ê²€ì¦                                  â”‚
â”‚                                                                â”‚
â”‚  âœ… ë°ì´í„°ë² ì´ìŠ¤ ì˜ì¡´ì„± ê²©ë¦¬ í…ŒìŠ¤íŠ¸                            â”‚
â”‚                                                                â”‚
â”‚  âœ… ì™¸ë¶€ API ì˜ì¡´ì„± ê²©ë¦¬ í…ŒìŠ¤íŠ¸                                â”‚
â”‚                                                                â”‚
â”‚  âœ… ì´ë©”ì¼/ë¡œê¹… ì„œë¹„ìŠ¤ ì˜ì¡´ì„± ê²©ë¦¬ í…ŒìŠ¤íŠ¸                      â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“ ìµœì¢… í”„ë¡œì íŠ¸ êµ¬ì¡°

```
UserManagementSolution/
â”‚
â”œâ”€â”€ UserManagement/                    â† í”„ë¡œë•ì…˜ ì½”ë“œ
â”‚   â”œâ”€â”€ Models/
â”‚   â”‚   â””â”€â”€ User.cs
â”‚   â”œâ”€â”€ Interfaces/
â”‚   â”‚   â”œâ”€â”€ IDataRepository.cs
â”‚   â”‚   â”œâ”€â”€ IEmailService.cs
â”‚   â”‚   â””â”€â”€ ILogger.cs
â”‚   â””â”€â”€ Services/
â”‚       â””â”€â”€ UserService.cs
â”‚
â””â”€â”€ UserManagement.Tests/              â† í…ŒìŠ¤íŠ¸ ì½”ë“œ
    â””â”€â”€ UserServiceTests.cs
```

---

## 2. ì™¸ë¶€ ì˜ì¡´ì„±ì´ë€?

### Step 2.1: ì˜ì¡´ì„±ì˜ ì •ì˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì˜ì¡´ì„± (Dependency) ì´ë€?                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  í´ë˜ìŠ¤ê°€ ë™ì‘í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ë‹¤ë¥¸ í´ë˜ìŠ¤ë‚˜ ì„œë¹„ìŠ¤            â”‚
â”‚                                                                â”‚
â”‚  ì˜ˆì‹œ:                                                         â”‚
â”‚  UserServiceê°€ ë™ì‘í•˜ë ¤ë©´ ë‹¤ìŒì´ í•„ìš”í•¨:                       â”‚
â”‚  â€¢ ë°ì´í„°ë² ì´ìŠ¤ (ì‚¬ìš©ì ì •ë³´ ì €ì¥/ì¡°íšŒ)                        â”‚
â”‚  â€¢ ì´ë©”ì¼ ì„œë¹„ìŠ¤ (ì•Œë¦¼ ì „ì†¡)                                   â”‚
â”‚  â€¢ ë¡œê±° (ë¡œê·¸ ê¸°ë¡)                                            â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚  â”‚ UserService â”‚                                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚         â”‚ ì˜ì¡´                                                 â”‚
â”‚         â–¼                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚  Database    EmailService    Logger      â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 2.2: ì™¸ë¶€ ì˜ì¡´ì„±ì˜ ì¢…ë¥˜

| ì¢…ë¥˜ | ì˜ˆì‹œ |
|------|------|
| ë°ì´í„°ë² ì´ìŠ¤ | SQL Server, MySQL, MongoDB |
| ì™¸ë¶€ API | REST API, ê²°ì œ API, ì†Œì…œ ë¡œê·¸ì¸ |
| íŒŒì¼ ì‹œìŠ¤í…œ | íŒŒì¼ ì½ê¸°/ì“°ê¸° |
| ì™¸ë¶€ ì„œë¹„ìŠ¤ | ì´ë©”ì¼, SMS, í‘¸ì‹œ ì•Œë¦¼ |
| ì‹œìŠ¤í…œ ìì› | DateTime.Now, Random |

---

## 3. ì™¸ë¶€ ì˜ì¡´ì„±ì˜ ë¬¸ì œì 

### Step 3.1: í…ŒìŠ¤íŠ¸ê°€ ì–´ë ¤ìš´ ì´ìœ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì™¸ë¶€ ì˜ì¡´ì„±ì´ ìˆìœ¼ë©´ í…ŒìŠ¤íŠ¸ê°€ ì–´ë ¤ìš´ ì´ìœ                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  âŒ ë¬¸ì œ 1: ëŠë¦¼                                               â”‚
â”‚     â€¢ DB ì—°ê²°: ìˆ˜ë°± ms                                         â”‚
â”‚     â€¢ API í˜¸ì¶œ: ìˆ˜ì´ˆ                                           â”‚
â”‚                                                                â”‚
â”‚  âŒ ë¬¸ì œ 2: ë¶ˆì•ˆì •                                             â”‚
â”‚     â€¢ ë„¤íŠ¸ì›Œí¬ ì¥ì•                                             â”‚
â”‚     â€¢ DB ì„œë²„ ë‹¤ìš´                                             â”‚
â”‚     â†’ í…ŒìŠ¤íŠ¸ê°€ ë•Œë•Œë¡œ ì‹¤íŒ¨ (Flaky Test)                       â”‚
â”‚                                                                â”‚
â”‚  âŒ ë¬¸ì œ 3: í™˜ê²½ ì˜ì¡´                                          â”‚
â”‚     â€¢ ë¡œì»¬ DBê°€ ìˆì–´ì•¼ í•¨                                      â”‚
â”‚     â€¢ í…ŒìŠ¤íŠ¸ ì„œë²„ ì„¤ì • í•„ìš”                                    â”‚
â”‚                                                                â”‚
â”‚  âŒ ë¬¸ì œ 4: ë¶€ì‘ìš© (Side Effect)                               â”‚
â”‚     â€¢ ì‹¤ì œ DBì— ë°ì´í„°ê°€ ìŒ“ì„                                  â”‚
â”‚     â€¢ ì‹¤ì œ ì´ë©”ì¼ì´ ë°œì†¡ë¨                                     â”‚
â”‚                                                                â”‚
â”‚  âŒ ë¬¸ì œ 5: íŠ¹ì • ìƒí™© ì¬í˜„ ì–´ë ¤ì›€                              â”‚
â”‚     â€¢ ë„¤íŠ¸ì›Œí¬ íƒ€ì„ì•„ì›ƒ ìƒí™©                                   â”‚
â”‚     â€¢ DB ì—°ê²° ì‹¤íŒ¨ ìƒí™©                                        â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 3.2: í•´ê²°ì±… - í…ŒìŠ¤íŠ¸ ë”ë¸”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  í•´ê²°ì±…: í…ŒìŠ¤íŠ¸ ë”ë¸” (Test Double)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  ì‹¤ì œ ì˜ì¡´ì„± ëŒ€ì‹  "ê°€ì§œ ê°ì²´"ë¥¼ ì‚¬ìš©!                          â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚ ì‹¤ì œ í™˜ê²½   â”‚         â”‚ í…ŒìŠ¤íŠ¸ í™˜ê²½ â”‚                       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚
â”‚  â”‚ UserService â”‚         â”‚ UserService â”‚                       â”‚
â”‚  â”‚      â”‚      â”‚         â”‚      â”‚      â”‚                       â”‚
â”‚  â”‚      â–¼      â”‚         â”‚      â–¼      â”‚                       â”‚
â”‚  â”‚  ì‹¤ì œ DB    â”‚         â”‚  Mock DB    â”‚ â† ê°€ì§œ!              â”‚
â”‚  â”‚  ì‹¤ì œ Email â”‚         â”‚  Mock Email â”‚ â† ê°€ì§œ!              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                                â”‚
â”‚  ì¥ì :                                                         â”‚
â”‚  âœ… ë¹ ë¦„ (ì‹¤ì œ ì—°ê²° ì—†ìŒ)                                      â”‚
â”‚  âœ… ì•ˆì •ì  (í•­ìƒ ê°™ì€ ê²°ê³¼)                                    â”‚
â”‚  âœ… ë…ë¦½ì  (í™˜ê²½ ë¶ˆí•„ìš”)                                       â”‚
â”‚  âœ… ë¶€ì‘ìš© ì—†ìŒ                                                â”‚
â”‚  âœ… ëª¨ë“  ìƒí™© ì¬í˜„ ê°€ëŠ¥                                        â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. í…ŒìŠ¤íŠ¸ ë”ë¸”ì´ë€?

### Step 4.1: í…ŒìŠ¤íŠ¸ ë”ë¸”ì˜ ì •ì˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  í…ŒìŠ¤íŠ¸ ë”ë¸” (Test Double)                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  "ìŠ¤í„´íŠ¸ ë”ë¸”"ì—ì„œ ìœ ë˜í•œ ìš©ì–´                                 â”‚
â”‚                                                                â”‚
â”‚  ì˜í™”ì—ì„œ:                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚ ì‹¤ì œ ë°°ìš°   â”‚         â”‚ ìŠ¤í„´íŠ¸ ë”ë¸” â”‚                       â”‚
â”‚  â”‚ (ì£¼ì—°)     â”‚         â”‚ (ëŒ€ì—­)     â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚  ìœ„í—˜í•œ ì¥ë©´ì—ì„œ ì‹¤ì œ ë°°ìš° ëŒ€ì‹  ëŒ€ì—­ì´ ì—°ê¸°                    â”‚
â”‚                                                                â”‚
â”‚  í…ŒìŠ¤íŠ¸ì—ì„œ:                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚ ì‹¤ì œ ê°ì²´   â”‚         â”‚ í…ŒìŠ¤íŠ¸ ë”ë¸” â”‚                       â”‚
â”‚  â”‚ (ì˜ì¡´ì„±)   â”‚         â”‚ (ê°€ì§œ ê°ì²´) â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚  í…ŒìŠ¤íŠ¸ ì‹œ ì‹¤ì œ ì˜ì¡´ì„± ëŒ€ì‹  ê°€ì§œ ê°ì²´ê°€ ë™ì‘                   â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. í…ŒìŠ¤íŠ¸ ë”ë¸”ì˜ ì¢…ë¥˜

### Step 5.1: 5ê°€ì§€ í…ŒìŠ¤íŠ¸ ë”ë¸”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  í…ŒìŠ¤íŠ¸ ë”ë¸”ì˜ 5ê°€ì§€ ì¢…ë¥˜                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚   Dummy    Stub     Spy      Mock     Fake                     â”‚
â”‚     â”‚        â”‚        â”‚        â”‚        â”‚                      â”‚
â”‚     â–¼        â–¼        â–¼        â–¼        â–¼                      â”‚
â”‚   ë‹¨ìˆœ     ë¯¸ë¦¬      í˜¸ì¶œ     í–‰ìœ„     ê°„ë‹¨í•œ                  â”‚
â”‚   ì±„ì›€     ì •ì˜ëœ    ê¸°ë¡     ê²€ì¦     êµ¬í˜„                    â”‚
â”‚   ìš©ë„     ì‘ë‹µ                                                â”‚
â”‚                                                                â”‚
â”‚  ë³µì¡ë„:  ë‚®ìŒ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º ë†’ìŒ               â”‚
â”‚           Dummy â†’ Stub â†’ Spy â†’ Mock â†’ Fake                    â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 5.2: ë¹„êµí‘œ

| ì¢…ë¥˜ | ëª©ì  | ì‘ë‹µ ë°˜í™˜ | í˜¸ì¶œ ê¸°ë¡ | í˜¸ì¶œ ê²€ì¦ |
|------|------|----------|----------|----------|
| Dummy | ë§¤ê°œë³€ìˆ˜ ì±„ìš°ê¸° | âŒ | âŒ | âŒ |
| Stub | ë¯¸ë¦¬ ì •ì˜ëœ ì‘ë‹µ | âœ… | âŒ | âŒ |
| Spy | í˜¸ì¶œ ê¸°ë¡ | âœ… | âœ… | âŒ |
| Mock | í–‰ìœ„ ê²€ì¦ | âœ… | âœ… | âœ… |
| Fake | ê°„ë‹¨í•œ ì‹¤ì œ êµ¬í˜„ | âœ… | âŒ | âŒ |

---

## 6. Dummy ê°ì²´

### Step 6.1: Dummyë€?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Dummy ê°ì²´                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â€¢ ê°€ì¥ ë‹¨ìˆœí•œ í…ŒìŠ¤íŠ¸ ë”ë¸”                                     â”‚
â”‚  â€¢ ë§¤ê°œë³€ìˆ˜ë¥¼ ì±„ìš°ê¸° ìœ„í•´ì„œë§Œ ì‚¬ìš©                             â”‚
â”‚  â€¢ ì‹¤ì œë¡œ ì‚¬ìš©ë˜ì§€ ì•ŠìŒ                                        â”‚
â”‚                                                                â”‚
â”‚  ë¹„ìœ : ì˜í™” ì´¬ì˜ì—ì„œ ë°°ê²½ì— ì„œìˆëŠ” ì—‘ìŠ¤íŠ¸ë¼                    â”‚
â”‚        â†’ ì¡´ì¬ë§Œ í•  ë¿, ì‹¤ì œë¡œ ì—°ê¸°í•˜ì§€ ì•ŠìŒ                    â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 6.2: Dummy ì˜ˆì‹œ

```csharp
public class DummyLogger : ILogger
{
    public void Log(string message) { }  // ë¹ˆ êµ¬í˜„
    public void LogError(string message, Exception ex) { }
}

// í…ŒìŠ¤íŠ¸ì—ì„œ ì‚¬ìš©
var dummyLogger = new DummyLogger();  // ì‹¤ì œë¡œ ì‚¬ìš© ì•ˆ ë¨
var service = new UserService(repository, dummyLogger);
```

---

## 7. Stub ê°ì²´

### Step 7.1: Stubì´ë€?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Stub ê°ì²´                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â€¢ ë¯¸ë¦¬ ì •ì˜ëœ ì‘ë‹µì„ ë°˜í™˜í•˜ëŠ” ê°ì²´                            â”‚
â”‚  â€¢ í…ŒìŠ¤íŠ¸ì— í•„ìš”í•œ ë°ì´í„°ë¥¼ ì œê³µ                               â”‚
â”‚  â€¢ í˜¸ì¶œ ì—¬ë¶€ëŠ” ê²€ì¦í•˜ì§€ ì•ŠìŒ                                   â”‚
â”‚                                                                â”‚
â”‚  "GetUser(1)ì„ í˜¸ì¶œí•˜ë©´ í•­ìƒ ì´ User ê°ì²´ë¥¼ ë°˜í™˜í•´ë¼"          â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 7.2: Stub ì˜ˆì‹œ

```csharp
public class StubUserRepository : IUserRepository
{
    public User GetById(int id)
    {
        return new User { Id = id, Name = "í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì" };
    }
}
```

---

## 8. Spy ê°ì²´

### Step 8.1: Spyë€?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Spy ê°ì²´                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â€¢ í˜¸ì¶œëœ ë‚´ìš©ì„ ê¸°ë¡í•˜ëŠ” ê°ì²´                                 â”‚
â”‚  â€¢ Stub + í˜¸ì¶œ ê¸°ë¡ ê¸°ëŠ¥                                       â”‚
â”‚  â€¢ ë‚˜ì¤‘ì— í˜¸ì¶œ ë‚´ìš©ì„ í™•ì¸í•  ìˆ˜ ìˆìŒ                           â”‚
â”‚                                                                â”‚
â”‚  ë¹„ìœ : CCTV (ê°ì‹œ ì¹´ë©”ë¼)                                      â”‚
â”‚        â†’ ëª¨ë“  í–‰ë™ì„ ê¸°ë¡í•˜ê³ , ë‚˜ì¤‘ì— í™•ì¸ ê°€ëŠ¥                â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 8.2: Spy ì˜ˆì‹œ

```csharp
public class SpyEmailService : IEmailService
{
    public int SendCount { get; private set; } = 0;
    public string LastRecipient { get; private set; }
    
    public bool SendEmail(string to, string subject, string body)
    {
        SendCount++;
        LastRecipient = to;
        return true;
    }
}
```

---

## 9. Mock ê°ì²´

### Step 9.1: Mockì´ë€?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Mock ê°ì²´                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â€¢ ì˜ˆìƒë˜ëŠ” í˜¸ì¶œì„ ë¯¸ë¦¬ ì •ì˜í•˜ê³  ê²€ì¦í•˜ëŠ” ê°ì²´                 â”‚
â”‚  â€¢ Stub + Spy + ìë™ ê²€ì¦                                      â”‚
â”‚  â€¢ í–‰ìœ„ ê²€ì¦ (Behavior Verification)ì— ì‚¬ìš©                    â”‚
â”‚  â€¢ Moq, NSubstitute ë“±ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ì‰½ê²Œ ìƒì„±                â”‚
â”‚                                                                â”‚
â”‚  "SendEmailì´ ì •í™•íˆ 1ë²ˆ, 'test@test.com'ìœ¼ë¡œ í˜¸ì¶œë˜ì–´ì•¼ í•œë‹¤" â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 9.2: Mock ì˜ˆì‹œ (Moq ì‚¬ìš©)

```csharp
// Mock ì˜ˆì‹œ (Moq ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©)
var mockEmailService = new Mock<IEmailService>();

// Setup - ë™ì‘ ì •ì˜
mockEmailService
    .Setup(x => x.SendEmail(It.IsAny<string>(), It.IsAny<string>(), It.IsAny<string>()))
    .Returns(true);

// Verify - í–‰ìœ„ ê²€ì¦
mockEmailService.Verify(
    x => x.SendEmail("test@test.com", It.IsAny<string>(), It.IsAny<string>()),
    Times.Once);
```

---

## 10. Fake ê°ì²´

### Step 10.1: Fakeë€?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Fake ê°ì²´                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â€¢ ì‹¤ì œë¡œ ë™ì‘í•˜ëŠ” ê°„ë‹¨í•œ êµ¬í˜„ì²´                               â”‚
â”‚  â€¢ í”„ë¡œë•ì…˜ì—ëŠ” ë¶€ì í•©í•˜ì§€ë§Œ í…ŒìŠ¤íŠ¸ì—ëŠ” ì¶©ë¶„                   â”‚
â”‚  â€¢ ìƒíƒœë¥¼ ê°€ì§€ê³  ì‹¤ì œë¡œ ë™ì‘í•¨                                 â”‚
â”‚                                                                â”‚
â”‚  ì˜ˆì‹œ: In-Memory Database                                      â”‚
â”‚        â†’ ì‹¤ì œ DBì²˜ëŸ¼ ë™ì‘í•˜ì§€ë§Œ ë©”ëª¨ë¦¬ì— ì €ì¥                  â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 10.2: Fake ì˜ˆì‹œ

```csharp
public class FakeUserRepository : IUserRepository
{
    private readonly Dictionary<int, User> _users = new Dictionary<int, User>();
    private int _nextId = 1;
    
    public User GetById(int id)
    {
        return _users.TryGetValue(id, out var user) ? user : null;
    }
    
    public bool Save(User user)
    {
        if (user.Id == 0) user.Id = _nextId++;
        _users[user.Id] = user;
        return true;
    }
}
```

---

# Part 2: í”„ë¡œì íŠ¸ ì„¤ì •

---

## 11. ì†”ë£¨ì…˜ ìƒì„±

### Step 11.1: Visual Studio ì‹¤í–‰

1. Visual Studioë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
2. **ìƒˆ í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°**ë¥¼ ì„ íƒí•©ë‹ˆë‹¤.

---

## 12. í”„ë¡œë•ì…˜ ì½”ë“œ í”„ë¡œì íŠ¸ ìƒì„±

### Step 12.1: í´ë˜ìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„ íƒ

1. **Visual C#** â†’ **í´ë˜ìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬(.NET Framework)** ì„ íƒ
2. ì´ë¦„: `UserManagement`
3. í”„ë ˆì„ì›Œí¬: `.NET Framework 4.6.1`

### Step 12.2: í´ë” êµ¬ì¡° ìƒì„±

- `Models` í´ë” ìƒì„±
- `Interfaces` í´ë” ìƒì„±
- `Services` í´ë” ìƒì„±

---

## 13. í…ŒìŠ¤íŠ¸ í”„ë¡œì íŠ¸ ìƒì„±

### Step 13.1: í…ŒìŠ¤íŠ¸ í”„ë¡œì íŠ¸ ì¶”ê°€

1. ì†”ë£¨ì…˜ ìš°í´ë¦­ â†’ **ì¶”ê°€** â†’ **ìƒˆ í”„ë¡œì íŠ¸**
2. **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ í”„ë¡œì íŠ¸(.NET Framework)** ì„ íƒ
3. ì´ë¦„: `UserManagement.Tests`

---

## 14. NuGet íŒ¨í‚¤ì§€ ì„¤ì¹˜ - NUnit

### Step 14.1: NUnit íŒ¨í‚¤ì§€ ì„¤ì¹˜

**UserManagement.Tests** í”„ë¡œì íŠ¸ì— ë‹¤ìŒ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤:

| íŒ¨í‚¤ì§€ | ë²„ì „ |
|--------|------|
| NUnit | 3.12.0+ |
| NUnit3TestAdapter | 3.15.1+ |
| Microsoft.NET.Test.Sdk | 16.4.0+ |

---

## 15. NuGet íŒ¨í‚¤ì§€ ì„¤ì¹˜ - Moq

### Step 15.1: Moq ê²€ìƒ‰ ë° ì„¤ì¹˜

1. NuGet íŒ¨í‚¤ì§€ ê´€ë¦¬ìì—ì„œ `Moq` ê²€ìƒ‰
2. **Moq** íŒ¨í‚¤ì§€ ì„ íƒ (by Daniel Cazzulino)
3. ë²„ì „ 4.16.1+ ì„¤ì¹˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Moq íŒ¨í‚¤ì§€                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â€¢ .NETì—ì„œ ê°€ì¥ ì¸ê¸° ìˆëŠ” Mocking í”„ë ˆì„ì›Œí¬                  â”‚
â”‚  â€¢ ëŒë‹¤ í‘œí˜„ì‹ ê¸°ë°˜ì˜ ì§ê´€ì ì¸ API                             â”‚
â”‚  â€¢ ì¸í„°í˜ì´ìŠ¤, ì¶”ìƒ í´ë˜ìŠ¤ Mock ì§€ì›                           â”‚
â”‚                                                                â”‚
â”‚  ì„¤ì¹˜ ëª…ë ¹ì–´:                                                  â”‚
â”‚  Install-Package Moq                                           â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 16. í”„ë¡œì íŠ¸ ì°¸ì¡° ì¶”ê°€

### Step 16.1: ì°¸ì¡° ì¶”ê°€

1. **UserManagement.Tests** â†’ **ì°¸ì¡°** ìš°í´ë¦­
2. **ì°¸ì¡° ì¶”ê°€** ì„ íƒ
3. **UserManagement** í”„ë¡œì íŠ¸ ì²´í¬

---

# ğŸ§ª C# Moq ì™¸ë¶€ ì˜ì¡´ì„± ì²˜ë¦¬ ë”°ë¼í•˜ê¸° ì‹¤ìŠµ (ìƒì„¸ ë²„ì „) - Part 2

---

# Part 3: ì¸í„°í˜ì´ìŠ¤ ì„¤ê³„

---

## 17. ì¸í„°í˜ì´ìŠ¤ë€?

### Step 17.1: ì¸í„°í˜ì´ìŠ¤ì˜ ì •ì˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì¸í„°í˜ì´ìŠ¤ (Interface)                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â€¢ í´ë˜ìŠ¤ê°€ êµ¬í˜„í•´ì•¼ í•  ë©”ì„œë“œì˜ "ê³„ì•½ì„œ"                      â”‚
â”‚  â€¢ êµ¬í˜„ ì—†ì´ ë©”ì„œë“œ ì‹œê·¸ë‹ˆì²˜ë§Œ ì •ì˜                            â”‚
â”‚  â€¢ ë‹¤í˜•ì„±ì˜ í•µì‹¬ - ì—¬ëŸ¬ êµ¬í˜„ì²´ë¥¼ êµì²´ ê°€ëŠ¥                     â”‚
â”‚                                                                â”‚
â”‚  ë¹„ìœ :                                                         â”‚
â”‚  USB í¬íŠ¸ ê·œê²©                                                 â”‚
â”‚  â†’ USB ê·œê²©ë§Œ ë§ìœ¼ë©´ ì–´ë–¤ ê¸°ê¸°ë“  ì—°ê²° ê°€ëŠ¥                     â”‚
â”‚  â†’ ë§ˆìš°ìŠ¤, í‚¤ë³´ë“œ, ì™¸ì¥í•˜ë“œ ë“± ë‹¤ì–‘í•œ ê¸°ê¸° ì—°ê²°                â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚  â”‚ IRepository â”‚  â† ì¸í„°í˜ì´ìŠ¤ (ê³„ì•½)                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚         â”‚ êµ¬í˜„                                                 â”‚
â”‚    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚    â–¼         â–¼            â–¼                                    â”‚
â”‚  SqlRepo   MongoRepo   MockRepo                                â”‚
â”‚  (ì‹¤ì œDB)  (NoSQL)     (í…ŒìŠ¤íŠ¸ìš©)                              â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 17.2: ì¸í„°í˜ì´ìŠ¤ê°€ Mockì— í•„ìš”í•œ ì´ìœ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì™œ ì¸í„°í˜ì´ìŠ¤ê°€ í•„ìš”í•œê°€?                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  MoqëŠ” ì¸í„°í˜ì´ìŠ¤ ë˜ëŠ” virtual ë©”ì„œë“œë§Œ Mock ê°€ëŠ¥              â”‚
â”‚                                                                â”‚
â”‚  âŒ ì¼ë°˜ í´ë˜ìŠ¤ëŠ” Mock ë¶ˆê°€:                                   â”‚
â”‚  public class SqlRepository                                    â”‚
â”‚  {                                                             â”‚
â”‚      public User GetById(int id) { ... }  // Mock ë¶ˆê°€!        â”‚
â”‚  }                                                             â”‚
â”‚                                                                â”‚
â”‚  âœ… ì¸í„°í˜ì´ìŠ¤ëŠ” Mock ê°€ëŠ¥:                                    â”‚
â”‚  public interface IRepository                                  â”‚
â”‚  {                                                             â”‚
â”‚      User GetById(int id);  // Mock ê°€ëŠ¥!                      â”‚
â”‚  }                                                             â”‚
â”‚                                                                â”‚
â”‚  â†’ ì˜ì¡´ì„±ì„ ì¸í„°í˜ì´ìŠ¤ë¡œ ì •ì˜í•˜ë©´ Mock êµì²´ ê°€ëŠ¥!              â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 18. ì˜ì¡´ì„± ì£¼ì…ì´ë€?

### Step 18.1: ì˜ì¡´ì„± ì£¼ì…ì˜ ì •ì˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì˜ì¡´ì„± ì£¼ì… (Dependency Injection, DI)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  í´ë˜ìŠ¤ê°€ í•„ìš”í•œ ì˜ì¡´ì„±ì„ ì§ì ‘ ìƒì„±í•˜ì§€ ì•Šê³                    â”‚
â”‚  ì™¸ë¶€ì—ì„œ ì£¼ì…ë°›ëŠ” ë””ìì¸ íŒ¨í„´                                 â”‚
â”‚                                                                â”‚
â”‚  âŒ ì˜ì¡´ì„± ì£¼ì… ì—†ì´ (í…ŒìŠ¤íŠ¸ ì–´ë ¤ì›€):                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ public class UserService                                 â”‚ â”‚
â”‚  â”‚ {                                                        â”‚ â”‚
â”‚  â”‚     private SqlRepository _repo = new SqlRepository();   â”‚ â”‚
â”‚  â”‚                           â†‘                              â”‚ â”‚
â”‚  â”‚                    ì§ì ‘ ìƒì„± - êµì²´ ë¶ˆê°€!                â”‚ â”‚
â”‚  â”‚ }                                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                â”‚
â”‚  âœ… ì˜ì¡´ì„± ì£¼ì… ì‚¬ìš© (í…ŒìŠ¤íŠ¸ ê°€ëŠ¥):                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ public class UserService                                 â”‚ â”‚
â”‚  â”‚ {                                                        â”‚ â”‚
â”‚  â”‚     private IRepository _repo;                           â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚     public UserService(IRepository repo)                 â”‚ â”‚
â”‚  â”‚     {                            â†‘                       â”‚ â”‚
â”‚  â”‚         _repo = repo;    ì™¸ë¶€ì—ì„œ ì£¼ì… - êµì²´ ê°€ëŠ¥!      â”‚ â”‚
â”‚  â”‚     }                                                    â”‚ â”‚
â”‚  â”‚ }                                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 18.2: ìƒì„±ì ì£¼ì… íŒ¨í„´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ìƒì„±ì ì£¼ì… (Constructor Injection)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  ê°€ì¥ ì¼ë°˜ì ì¸ ì˜ì¡´ì„± ì£¼ì… ë°©ë²•                                â”‚
â”‚                                                                â”‚
â”‚  public class UserService                                      â”‚
â”‚  {                                                             â”‚
â”‚      private readonly IRepository _repository;                 â”‚
â”‚      private readonly IEmailService _emailService;             â”‚
â”‚      private readonly ILogger _logger;                         â”‚
â”‚                                                                â”‚
â”‚      // ìƒì„±ìë¥¼ í†µí•´ ì˜ì¡´ì„± ì£¼ì…                              â”‚
â”‚      public UserService(                                       â”‚
â”‚          IRepository repository,                               â”‚
â”‚          IEmailService emailService,                           â”‚
â”‚          ILogger logger)                                       â”‚
â”‚      {                                                         â”‚
â”‚          _repository = repository;                             â”‚
â”‚          _emailService = emailService;                         â”‚
â”‚          _logger = logger;                                     â”‚
â”‚      }                                                         â”‚
â”‚  }                                                             â”‚
â”‚                                                                â”‚
â”‚  ì‚¬ìš©:                                                         â”‚
â”‚  // ì‹¤ì œ í™˜ê²½                                                  â”‚
â”‚  var service = new UserService(sqlRepo, smtpEmail, fileLogger);â”‚
â”‚                                                                â”‚
â”‚  // í…ŒìŠ¤íŠ¸ í™˜ê²½                                                â”‚
â”‚  var service = new UserService(mockRepo, mockEmail, mockLogger);
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 19. IDataRepository ì¸í„°í˜ì´ìŠ¤ ìƒì„±

### Step 19.1: ì¸í„°í˜ì´ìŠ¤ íŒŒì¼ ìƒì„±

1. **Interfaces** í´ë” ìš°í´ë¦­
2. **ì¶”ê°€** â†’ **ìƒˆ í•­ëª©** â†’ **ì¸í„°í˜ì´ìŠ¤**
3. ì´ë¦„: `IDataRepository.cs`

### Step 19.2: IDataRepository ì½”ë“œ ì‘ì„±

```csharp
using System.Collections.Generic;
using UserManagement.Models;

namespace UserManagement.Interfaces
{
    /// <summary>
    /// ë°ì´í„° ì €ì¥ì†Œ ì¸í„°í˜ì´ìŠ¤
    /// ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼ì„ ì¶”ìƒí™”í•©ë‹ˆë‹¤.
    /// </summary>
    public interface IDataRepository
    {
        /// <summary>
        /// IDë¡œ ì‚¬ìš©ìë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
        /// </summary>
        /// <param name="id">ì‚¬ìš©ì ID</param>
        /// <returns>ì‚¬ìš©ì ê°ì²´, ì—†ìœ¼ë©´ null</returns>
        User GetById(int id);
        
        /// <summary>
        /// ëª¨ë“  ì‚¬ìš©ìë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
        /// </summary>
        /// <returns>ì‚¬ìš©ì ëª©ë¡</returns>
        IEnumerable<User> GetAll();
        
        /// <summary>
        /// ì´ë©”ì¼ë¡œ ì‚¬ìš©ìë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
        /// </summary>
        /// <param name="email">ì´ë©”ì¼ ì£¼ì†Œ</param>
        /// <returns>ì‚¬ìš©ì ê°ì²´, ì—†ìœ¼ë©´ null</returns>
        User GetByEmail(string email);
        
        /// <summary>
        /// ì‚¬ìš©ìë¥¼ ì €ì¥í•©ë‹ˆë‹¤.
        /// </summary>
        /// <param name="user">ì €ì¥í•  ì‚¬ìš©ì</param>
        /// <returns>ì €ì¥ëœ ì‚¬ìš©ì (ID í¬í•¨)</returns>
        User Save(User user);
        
        /// <summary>
        /// ì‚¬ìš©ìë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
        /// </summary>
        /// <param name="user">ì—…ë°ì´íŠ¸í•  ì‚¬ìš©ì</param>
        /// <returns>ì„±ê³µ ì—¬ë¶€</returns>
        bool Update(User user);
        
        /// <summary>
        /// ì‚¬ìš©ìë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.
        /// </summary>
        /// <param name="id">ì‚­ì œí•  ì‚¬ìš©ì ID</param>
        /// <returns>ì„±ê³µ ì—¬ë¶€</returns>
        bool Delete(int id);
        
        /// <summary>
        /// ì´ë©”ì¼ì´ ì´ë¯¸ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
        /// </summary>
        /// <param name="email">í™•ì¸í•  ì´ë©”ì¼</param>
        /// <returns>ì¡´ì¬ ì—¬ë¶€</returns>
        bool ExistsByEmail(string email);
    }
}
```

### Step 19.3: ì¸í„°í˜ì´ìŠ¤ êµ¬ì¡° ì„¤ëª…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  IDataRepository ë©”ì„œë“œ ìš”ì•½                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  ì¡°íšŒ ë©”ì„œë“œ (Read):                                           â”‚
â”‚  â”œâ”€â”€ GetById(int id)           â†’ User                         â”‚
â”‚  â”œâ”€â”€ GetAll()                  â†’ IEnumerable<User>            â”‚
â”‚  â”œâ”€â”€ GetByEmail(string email)  â†’ User                         â”‚
â”‚  â””â”€â”€ ExistsByEmail(string)     â†’ bool                         â”‚
â”‚                                                                â”‚
â”‚  ìƒì„±/ìˆ˜ì • ë©”ì„œë“œ (Create/Update):                             â”‚
â”‚  â”œâ”€â”€ Save(User user)           â†’ User                         â”‚
â”‚  â””â”€â”€ Update(User user)         â†’ bool                         â”‚
â”‚                                                                â”‚
â”‚  ì‚­ì œ ë©”ì„œë“œ (Delete):                                         â”‚
â”‚  â””â”€â”€ Delete(int id)            â†’ bool                         â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 20. IEmailService ì¸í„°í˜ì´ìŠ¤ ìƒì„±

### Step 20.1: ì¸í„°í˜ì´ìŠ¤ íŒŒì¼ ìƒì„±

1. **Interfaces** í´ë” ìš°í´ë¦­
2. **ì¶”ê°€** â†’ **ìƒˆ í•­ëª©** â†’ **ì¸í„°í˜ì´ìŠ¤**
3. ì´ë¦„: `IEmailService.cs`

### Step 20.2: IEmailService ì½”ë“œ ì‘ì„±

```csharp
using System.Threading.Tasks;

namespace UserManagement.Interfaces
{
    /// <summary>
    /// ì´ë©”ì¼ ì„œë¹„ìŠ¤ ì¸í„°í˜ì´ìŠ¤
    /// ì´ë©”ì¼ ë°œì†¡ ê¸°ëŠ¥ì„ ì¶”ìƒí™”í•©ë‹ˆë‹¤.
    /// </summary>
    public interface IEmailService
    {
        /// <summary>
        /// ì´ë©”ì¼ì„ ë°œì†¡í•©ë‹ˆë‹¤.
        /// </summary>
        /// <param name="to">ë°›ëŠ” ì‚¬ëŒ ì´ë©”ì¼</param>
        /// <param name="subject">ì œëª©</param>
        /// <param name="body">ë³¸ë¬¸</param>
        /// <returns>ë°œì†¡ ì„±ê³µ ì—¬ë¶€</returns>
        bool SendEmail(string to, string subject, string body);
        
        /// <summary>
        /// ì´ë©”ì¼ì„ ë¹„ë™ê¸°ë¡œ ë°œì†¡í•©ë‹ˆë‹¤.
        /// </summary>
        /// <param name="to">ë°›ëŠ” ì‚¬ëŒ ì´ë©”ì¼</param>
        /// <param name="subject">ì œëª©</param>
        /// <param name="body">ë³¸ë¬¸</param>
        /// <returns>ë°œì†¡ ì„±ê³µ ì—¬ë¶€</returns>
        Task<bool> SendEmailAsync(string to, string subject, string body);
        
        /// <summary>
        /// í™˜ì˜ ì´ë©”ì¼ì„ ë°œì†¡í•©ë‹ˆë‹¤.
        /// </summary>
        /// <param name="to">ë°›ëŠ” ì‚¬ëŒ ì´ë©”ì¼</param>
        /// <param name="userName">ì‚¬ìš©ì ì´ë¦„</param>
        /// <returns>ë°œì†¡ ì„±ê³µ ì—¬ë¶€</returns>
        bool SendWelcomeEmail(string to, string userName);
        
        /// <summary>
        /// ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ì´ë©”ì¼ì„ ë°œì†¡í•©ë‹ˆë‹¤.
        /// </summary>
        /// <param name="to">ë°›ëŠ” ì‚¬ëŒ ì´ë©”ì¼</param>
        /// <param name="resetToken">ì¬ì„¤ì • í† í°</param>
        /// <returns>ë°œì†¡ ì„±ê³µ ì—¬ë¶€</returns>
        bool SendPasswordResetEmail(string to, string resetToken);
    }
}
```

---

## 21. ILogger ì¸í„°í˜ì´ìŠ¤ ìƒì„±

### Step 21.1: ì¸í„°í˜ì´ìŠ¤ íŒŒì¼ ìƒì„±

1. **Interfaces** í´ë” ìš°í´ë¦­
2. **ì¶”ê°€** â†’ **ìƒˆ í•­ëª©** â†’ **ì¸í„°í˜ì´ìŠ¤**
3. ì´ë¦„: `ILogger.cs`

### Step 21.2: ILogger ì½”ë“œ ì‘ì„±

```csharp
using System;

namespace UserManagement.Interfaces
{
    /// <summary>
    /// ë¡œê¹… ì¸í„°í˜ì´ìŠ¤
    /// ë¡œê·¸ ê¸°ë¡ ê¸°ëŠ¥ì„ ì¶”ìƒí™”í•©ë‹ˆë‹¤.
    /// </summary>
    public interface ILogger
    {
        /// <summary>
        /// ì •ë³´ ë¡œê·¸ë¥¼ ê¸°ë¡í•©ë‹ˆë‹¤.
        /// </summary>
        /// <param name="message">ë¡œê·¸ ë©”ì‹œì§€</param>
        void LogInfo(string message);
        
        /// <summary>
        /// ê²½ê³  ë¡œê·¸ë¥¼ ê¸°ë¡í•©ë‹ˆë‹¤.
        /// </summary>
        /// <param name="message">ë¡œê·¸ ë©”ì‹œì§€</param>
        void LogWarning(string message);
        
        /// <summary>
        /// ì—ëŸ¬ ë¡œê·¸ë¥¼ ê¸°ë¡í•©ë‹ˆë‹¤.
        /// </summary>
        /// <param name="message">ë¡œê·¸ ë©”ì‹œì§€</param>
        void LogError(string message);
        
        /// <summary>
        /// ì˜ˆì™¸ì™€ í•¨ê»˜ ì—ëŸ¬ ë¡œê·¸ë¥¼ ê¸°ë¡í•©ë‹ˆë‹¤.
        /// </summary>
        /// <param name="message">ë¡œê·¸ ë©”ì‹œì§€</param>
        /// <param name="exception">ì˜ˆì™¸ ê°ì²´</param>
        void LogError(string message, Exception exception);
        
        /// <summary>
        /// ë””ë²„ê·¸ ë¡œê·¸ë¥¼ ê¸°ë¡í•©ë‹ˆë‹¤.
        /// </summary>
        /// <param name="message">ë¡œê·¸ ë©”ì‹œì§€</param>
        void LogDebug(string message);
    }
}
```

### Step 21.3: í˜„ì¬ í”„ë¡œì íŠ¸ êµ¬ì¡° í™•ì¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì†”ë£¨ì…˜ íƒìƒ‰ê¸°                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â–¼ UserManagement                                              â”‚
â”‚    â–¼ Interfaces                                                â”‚
â”‚        IDataRepository.cs   âœ…                                 â”‚
â”‚        IEmailService.cs     âœ…                                 â”‚
â”‚        ILogger.cs           âœ…                                 â”‚
â”‚    â–¶ Models                 (ë‹¤ìŒ ë‹¨ê³„)                        â”‚
â”‚    â–¶ Services               (ë‹¤ìŒ ë‹¨ê³„)                        â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# Part 4: ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ êµ¬í˜„

---

## 22. User ëª¨ë¸ í´ë˜ìŠ¤ ìƒì„±

### Step 22.1: ëª¨ë¸ íŒŒì¼ ìƒì„±

1. **Models** í´ë” ìš°í´ë¦­
2. **ì¶”ê°€** â†’ **í´ë˜ìŠ¤**
3. ì´ë¦„: `User.cs`

### Step 22.2: User í´ë˜ìŠ¤ ì½”ë“œ ì‘ì„±

```csharp
using System;

namespace UserManagement.Models
{
    /// <summary>
    /// ì‚¬ìš©ì ëª¨ë¸ í´ë˜ìŠ¤
    /// </summary>
    public class User
    {
        /// <summary>
        /// ì‚¬ìš©ì ê³ ìœ  ID
        /// </summary>
        public int Id { get; set; }
        
        /// <summary>
        /// ì‚¬ìš©ì ì´ë¦„
        /// </summary>
        public string Name { get; set; }
        
        /// <summary>
        /// ì´ë©”ì¼ ì£¼ì†Œ
        /// </summary>
        public string Email { get; set; }
        
        /// <summary>
        /// ë¹„ë°€ë²ˆí˜¸ (í•´ì‹œ)
        /// </summary>
        public string PasswordHash { get; set; }
        
        /// <summary>
        /// ê³„ì • í™œì„±í™” ì—¬ë¶€
        /// </summary>
        public bool IsActive { get; set; }
        
        /// <summary>
        /// ìƒì„± ì¼ì‹œ
        /// </summary>
        public DateTime CreatedAt { get; set; }
        
        /// <summary>
        /// ìˆ˜ì • ì¼ì‹œ
        /// </summary>
        public DateTime? UpdatedAt { get; set; }
        
        /// <summary>
        /// ë§ˆì§€ë§‰ ë¡œê·¸ì¸ ì¼ì‹œ
        /// </summary>
        public DateTime? LastLoginAt { get; set; }
    }
}
```

---

## 23. UserService í´ë˜ìŠ¤ ìƒì„±

### Step 23.1: ì„œë¹„ìŠ¤ íŒŒì¼ ìƒì„±

1. **Services** í´ë” ìš°í´ë¦­
2. **ì¶”ê°€** â†’ **í´ë˜ìŠ¤**
3. ì´ë¦„: `UserService.cs`

### Step 23.2: ê¸°ë³¸ í´ë˜ìŠ¤ êµ¬ì¡°

```csharp
using System;
using UserManagement.Interfaces;
using UserManagement.Models;

namespace UserManagement.Services
{
    /// <summary>
    /// ì‚¬ìš©ì ê´€ë ¨ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” ì„œë¹„ìŠ¤
    /// </summary>
    public class UserService
    {
        // ì˜ì¡´ì„± í•„ë“œ (ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ì¶”ê°€)
        
        // ìƒì„±ì (ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ì¶”ê°€)
        
        // ë©”ì„œë“œë“¤ (ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ì¶”ê°€)
    }
}
```

---

## 24. ìƒì„±ì ì£¼ì… êµ¬í˜„

### Step 24.1: í•„ë“œ ì„ ì–¸

```csharp
public class UserService
{
    private readonly IDataRepository _repository;
    private readonly IEmailService _emailService;
    private readonly ILogger _logger;
}
```

### Step 24.2: ìƒì„±ì ì‘ì„±

```csharp
public class UserService
{
    private readonly IDataRepository _repository;
    private readonly IEmailService _emailService;
    private readonly ILogger _logger;
    
    /// <summary>
    /// UserService ìƒì„±ì
    /// </summary>
    /// <param name="repository">ë°ì´í„° ì €ì¥ì†Œ</param>
    /// <param name="emailService">ì´ë©”ì¼ ì„œë¹„ìŠ¤</param>
    /// <param name="logger">ë¡œê±°</param>
    public UserService(
        IDataRepository repository, 
        IEmailService emailService, 
        ILogger logger)
    {
        _repository = repository ?? throw new ArgumentNullException(nameof(repository));
        _emailService = emailService ?? throw new ArgumentNullException(nameof(emailService));
        _logger = logger ?? throw new ArgumentNullException(nameof(logger));
    }
}
```

### Step 24.3: ìƒì„±ì ì½”ë“œ ì„¤ëª…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ìƒì„±ì ì½”ë“œ ë¶„ì„                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  _repository = repository ?? throw new ArgumentNullException();â”‚
â”‚                           â†‘                                    â”‚
â”‚                    null ë³‘í•© ì—°ì‚°ì                            â”‚
â”‚                                                                â”‚
â”‚  ì˜ë¯¸:                                                         â”‚
â”‚  â€¢ repositoryê°€ nullì´ ì•„ë‹ˆë©´ â†’ _repositoryì— í• ë‹¹            â”‚
â”‚  â€¢ repositoryê°€ nullì´ë©´ â†’ ArgumentNullException ë°œìƒ          â”‚
â”‚                                                                â”‚
â”‚  ì™œ null ì²´í¬ë¥¼ í•˜ëŠ”ê°€?                                        â”‚
â”‚  â€¢ í•„ìˆ˜ ì˜ì¡´ì„±ì´ ì—†ìœ¼ë©´ í´ë˜ìŠ¤ê°€ ë™ì‘í•  ìˆ˜ ì—†ìŒ               â”‚
â”‚  â€¢ ë¹ ë¥¸ ì‹¤íŒ¨ (Fail Fast) ì›ì¹™                                  â”‚
â”‚  â€¢ ë‚˜ì¤‘ì— NullReferenceException ë°œìƒ ë°©ì§€                     â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 25. GetUserById ë©”ì„œë“œ êµ¬í˜„

### Step 25.1: ë©”ì„œë“œ ì½”ë“œ ì‘ì„±

```csharp
/// <summary>
/// IDë¡œ ì‚¬ìš©ìë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
/// </summary>
/// <param name="id">ì‚¬ìš©ì ID</param>
/// <returns>ì‚¬ìš©ì ê°ì²´, ì—†ìœ¼ë©´ null</returns>
public User GetUserById(int id)
{
    _logger.LogInfo($"ì‚¬ìš©ì ì¡°íšŒ ì‹œì‘: ID={id}");
    
    try
    {
        var user = _repository.GetById(id);
        
        if (user == null)
        {
            _logger.LogWarning($"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ: ID={id}");
            return null;
        }
        
        _logger.LogInfo($"ì‚¬ìš©ì ì¡°íšŒ ì„±ê³µ: ID={id}, Name={user.Name}");
        return user;
    }
    catch (Exception ex)
    {
        _logger.LogError($"ì‚¬ìš©ì ì¡°íšŒ ì‹¤íŒ¨: ID={id}", ex);
        throw;
    }
}
```

### Step 25.2: ë©”ì„œë“œ íë¦„ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GetUserById ì‹¤í–‰ íë¦„                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  GetUserById(id) í˜¸ì¶œ                                          â”‚
â”‚         â”‚                                                      â”‚
â”‚         â–¼                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚ LogInfo í˜¸ì¶œ    â”‚  â†’ _logger.LogInfo(...)                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚           â”‚                                                    â”‚
â”‚           â–¼                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚ GetById í˜¸ì¶œ    â”‚  â†’ _repository.GetById(id)               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚           â”‚                                                    â”‚
â”‚      â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                                               â”‚
â”‚      â”‚         â”‚                                               â”‚
â”‚   userê°€     userê°€                                            â”‚
â”‚   null       ìˆìŒ                                              â”‚
â”‚      â”‚         â”‚                                               â”‚
â”‚      â–¼         â–¼                                               â”‚
â”‚  LogWarning  LogInfo                                           â”‚
â”‚  return null return user                                       â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 26. CreateUser ë©”ì„œë“œ êµ¬í˜„

### Step 26.1: ë©”ì„œë“œ ì½”ë“œ ì‘ì„±

```csharp
/// <summary>
/// ìƒˆ ì‚¬ìš©ìë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
/// </summary>
/// <param name="user">ìƒì„±í•  ì‚¬ìš©ì ì •ë³´</param>
/// <returns>ìƒì„±ëœ ì‚¬ìš©ì</returns>
/// <exception cref="ArgumentNullException">userê°€ nullì¼ ë•Œ</exception>
/// <exception cref="InvalidOperationException">ì´ë©”ì¼ì´ ì´ë¯¸ ì¡´ì¬í•  ë•Œ</exception>
public User CreateUser(User user)
{
    if (user == null)
        throw new ArgumentNullException(nameof(user));
    
    _logger.LogInfo($"ì‚¬ìš©ì ìƒì„± ì‹œì‘: Email={user.Email}");
    
    // ì´ë©”ì¼ ì¤‘ë³µ í™•ì¸
    if (_repository.ExistsByEmail(user.Email))
    {
        _logger.LogWarning($"ì´ë©”ì¼ ì¤‘ë³µ: {user.Email}");
        throw new InvalidOperationException($"ì´ë©”ì¼ì´ ì´ë¯¸ ì¡´ì¬í•©ë‹ˆë‹¤: {user.Email}");
    }
    
    try
    {
        // ì‚¬ìš©ì ì •ë³´ ì„¤ì •
        user.CreatedAt = DateTime.Now;
        user.IsActive = true;
        
        // ì €ì¥
        var savedUser = _repository.Save(user);
        _logger.LogInfo($"ì‚¬ìš©ì ì €ì¥ ì™„ë£Œ: ID={savedUser.Id}");
        
        // í™˜ì˜ ì´ë©”ì¼ ë°œì†¡
        var emailSent = _emailService.SendWelcomeEmail(savedUser.Email, savedUser.Name);
        
        if (emailSent)
        {
            _logger.LogInfo($"í™˜ì˜ ì´ë©”ì¼ ë°œì†¡ ì™„ë£Œ: {savedUser.Email}");
        }
        else
        {
            _logger.LogWarning($"í™˜ì˜ ì´ë©”ì¼ ë°œì†¡ ì‹¤íŒ¨: {savedUser.Email}");
        }
        
        return savedUser;
    }
    catch (Exception ex)
    {
        _logger.LogError($"ì‚¬ìš©ì ìƒì„± ì‹¤íŒ¨: {user.Email}", ex);
        throw;
    }
}
```

### Step 26.2: CreateUser íë¦„ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CreateUser ì‹¤í–‰ íë¦„                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  CreateUser(user) í˜¸ì¶œ                                         â”‚
â”‚         â”‚                                                      â”‚
â”‚         â–¼                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚  â”‚ null ì²´í¬           â”‚                                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚             â”‚                                                  â”‚
â”‚             â–¼                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚  â”‚ ì´ë©”ì¼ ì¤‘ë³µ í™•ì¸    â”‚  â†’ _repository.ExistsByEmail()       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚        â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                                             â”‚
â”‚      ì¤‘ë³µ       ì¤‘ë³µ                                           â”‚
â”‚      ìˆìŒ       ì—†ìŒ                                           â”‚
â”‚        â”‚         â”‚                                             â”‚
â”‚        â–¼         â–¼                                             â”‚
â”‚     ì˜ˆì™¸      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚     ë°œìƒ      â”‚ ì‚¬ìš©ì ì €ì¥     â”‚  â†’ _repository.Save()       â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                       â”‚                                        â”‚
â”‚                       â–¼                                        â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚              â”‚ í™˜ì˜ ì´ë©”ì¼ ë°œì†¡ â”‚  â†’ _emailService.SendWelcome â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                       â”‚                                        â”‚
â”‚                       â–¼                                        â”‚
â”‚                  return savedUser                              â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 27. DeleteUser ë©”ì„œë“œ êµ¬í˜„

### Step 27.1: ë©”ì„œë“œ ì½”ë“œ ì‘ì„±

```csharp
/// <summary>
/// ì‚¬ìš©ìë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.
/// </summary>
/// <param name="id">ì‚­ì œí•  ì‚¬ìš©ì ID</param>
/// <returns>ì‚­ì œ ì„±ê³µ ì—¬ë¶€</returns>
public bool DeleteUser(int id)
{
    _logger.LogInfo($"ì‚¬ìš©ì ì‚­ì œ ì‹œì‘: ID={id}");
    
    // ì‚¬ìš©ì ì¡´ì¬ í™•ì¸
    var user = _repository.GetById(id);
    
    if (user == null)
    {
        _logger.LogWarning($"ì‚­ì œí•  ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ: ID={id}");
        return false;
    }
    
    try
    {
        var result = _repository.Delete(id);
        
        if (result)
        {
            _logger.LogInfo($"ì‚¬ìš©ì ì‚­ì œ ì™„ë£Œ: ID={id}");
        }
        else
        {
            _logger.LogWarning($"ì‚¬ìš©ì ì‚­ì œ ì‹¤íŒ¨: ID={id}");
        }
        
        return result;
    }
    catch (Exception ex)
    {
        _logger.LogError($"ì‚¬ìš©ì ì‚­ì œ ì¤‘ ì˜¤ë¥˜: ID={id}", ex);
        throw;
    }
}
```

### Step 27.2: UserService ì „ì²´ ì½”ë“œ

```csharp
using System;
using UserManagement.Interfaces;
using UserManagement.Models;

namespace UserManagement.Services
{
    /// <summary>
    /// ì‚¬ìš©ì ê´€ë ¨ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” ì„œë¹„ìŠ¤
    /// </summary>
    public class UserService
    {
        private readonly IDataRepository _repository;
        private readonly IEmailService _emailService;
        private readonly ILogger _logger;
        
        public UserService(
            IDataRepository repository, 
            IEmailService emailService, 
            ILogger logger)
        {
            _repository = repository ?? throw new ArgumentNullException(nameof(repository));
            _emailService = emailService ?? throw new ArgumentNullException(nameof(emailService));
            _logger = logger ?? throw new ArgumentNullException(nameof(logger));
        }
        
        public User GetUserById(int id)
        {
            _logger.LogInfo($"ì‚¬ìš©ì ì¡°íšŒ ì‹œì‘: ID={id}");
            
            try
            {
                var user = _repository.GetById(id);
                
                if (user == null)
                {
                    _logger.LogWarning($"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ: ID={id}");
                    return null;
                }
                
                _logger.LogInfo($"ì‚¬ìš©ì ì¡°íšŒ ì„±ê³µ: ID={id}, Name={user.Name}");
                return user;
            }
            catch (Exception ex)
            {
                _logger.LogError($"ì‚¬ìš©ì ì¡°íšŒ ì‹¤íŒ¨: ID={id}", ex);
                throw;
            }
        }
        
        public User CreateUser(User user)
        {
            if (user == null)
                throw new ArgumentNullException(nameof(user));
            
            _logger.LogInfo($"ì‚¬ìš©ì ìƒì„± ì‹œì‘: Email={user.Email}");
            
            if (_repository.ExistsByEmail(user.Email))
            {
                _logger.LogWarning($"ì´ë©”ì¼ ì¤‘ë³µ: {user.Email}");
                throw new InvalidOperationException($"ì´ë©”ì¼ì´ ì´ë¯¸ ì¡´ì¬í•©ë‹ˆë‹¤: {user.Email}");
            }
            
            try
            {
                user.CreatedAt = DateTime.Now;
                user.IsActive = true;
                
                var savedUser = _repository.Save(user);
                _logger.LogInfo($"ì‚¬ìš©ì ì €ì¥ ì™„ë£Œ: ID={savedUser.Id}");
                
                var emailSent = _emailService.SendWelcomeEmail(savedUser.Email, savedUser.Name);
                
                if (emailSent)
                    _logger.LogInfo($"í™˜ì˜ ì´ë©”ì¼ ë°œì†¡ ì™„ë£Œ: {savedUser.Email}");
                else
                    _logger.LogWarning($"í™˜ì˜ ì´ë©”ì¼ ë°œì†¡ ì‹¤íŒ¨: {savedUser.Email}");
                
                return savedUser;
            }
            catch (Exception ex)
            {
                _logger.LogError($"ì‚¬ìš©ì ìƒì„± ì‹¤íŒ¨: {user.Email}", ex);
                throw;
            }
        }
        
        public bool DeleteUser(int id)
        {
            _logger.LogInfo($"ì‚¬ìš©ì ì‚­ì œ ì‹œì‘: ID={id}");
            
            var user = _repository.GetById(id);
            
            if (user == null)
            {
                _logger.LogWarning($"ì‚­ì œí•  ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ: ID={id}");
                return false;
            }
            
            try
            {
                var result = _repository.Delete(id);
                
                if (result)
                    _logger.LogInfo($"ì‚¬ìš©ì ì‚­ì œ ì™„ë£Œ: ID={id}");
                else
                    _logger.LogWarning($"ì‚¬ìš©ì ì‚­ì œ ì‹¤íŒ¨: ID={id}");
                
                return result;
            }
            catch (Exception ex)
            {
                _logger.LogError($"ì‚¬ìš©ì ì‚­ì œ ì¤‘ ì˜¤ë¥˜: ID={id}", ex);
                throw;
            }
        }
    }
}
```

---

# Part 5: Moq ê¸°ë³¸ ì‚¬ìš©ë²•

---

## 28. Mock ê°ì²´ ì„ ì–¸

### Step 28.1: í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ ìƒì„±

1. **UserManagement.Tests** í”„ë¡œì íŠ¸ì— `UserServiceTests.cs` íŒŒì¼ ìƒì„±

### Step 28.2: Mock ê°ì²´ ì„ ì–¸ ì½”ë“œ

```csharp
using Moq;
using NUnit.Framework;
using UserManagement.Interfaces;
using UserManagement.Models;
using UserManagement.Services;

namespace UserManagement.Tests
{
    [TestFixture]
    public class UserServiceTests
    {
        // Mock ê°ì²´ ì„ ì–¸
        private Mock<IDataRepository> _mockRepository;
        private Mock<IEmailService> _mockEmailService;
        private Mock<ILogger> _mockLogger;
        
        // í…ŒìŠ¤íŠ¸ ëŒ€ìƒ
        private UserService _userService;
    }
}
```

### Step 28.3: Mock ì„ ì–¸ ì½”ë“œ ë¶„ì„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Mock ì„ ì–¸ ë¶„ì„                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  private Mock<IDataRepository> _mockRepository;                â”‚
â”‚  â”€â”€â”€â”¬â”€â”€â”€ â”€â”€â”¬â”€â”€ â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€                  â”‚
â”‚     â”‚      â”‚        â”‚                â”‚                         â”‚
â”‚     â”‚      â”‚        â”‚                â””â”€ ë³€ìˆ˜ ì´ë¦„              â”‚
â”‚     â”‚      â”‚        â”‚                                          â”‚
â”‚     â”‚      â”‚        â””â”€ Mockí•  ì¸í„°í˜ì´ìŠ¤ íƒ€ì…                  â”‚
â”‚     â”‚      â”‚                                                   â”‚
â”‚     â”‚      â””â”€ Moq ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ Mock í´ë˜ìŠ¤                     â”‚
â”‚     â”‚                                                          â”‚
â”‚     â””â”€ ì ‘ê·¼ ì œí•œì (í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ ë‚´ì—ì„œë§Œ ì‚¬ìš©)               â”‚
â”‚                                                                â”‚
â”‚  Mock<T>ëŠ” T ì¸í„°í˜ì´ìŠ¤ì˜ ê°€ì§œ êµ¬í˜„ì²´ë¥¼ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ëŠ” ê°ì²´ â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 29. Mock ê°ì²´ ìƒì„±

### Step 29.1: SetUpì—ì„œ Mock ìƒì„±

```csharp
[TestFixture]
public class UserServiceTests
{
    private Mock<IDataRepository> _mockRepository;
    private Mock<IEmailService> _mockEmailService;
    private Mock<ILogger> _mockLogger;
    private UserService _userService;
    
    [SetUp]
    public void SetUp()
    {
        // Mock ê°ì²´ ìƒì„±
        _mockRepository = new Mock<IDataRepository>();
        _mockEmailService = new Mock<IEmailService>();
        _mockLogger = new Mock<ILogger>();
        
        // í…ŒìŠ¤íŠ¸ ëŒ€ìƒ ìƒì„± (Mock ì£¼ì…)
        _userService = new UserService(
            _mockRepository.Object,
            _mockEmailService.Object,
            _mockLogger.Object);
    }
}
```

### Step 29.2: Mock ìƒì„± íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Mock ê°ì²´ ìƒì„± ë° ì£¼ì… íë¦„                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  1. Mock ê°ì²´ ìƒì„±                                             â”‚
â”‚     _mockRepository = new Mock<IDataRepository>();             â”‚
â”‚                                                                â”‚
â”‚  2. .Objectë¡œ ì‹¤ì œ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì²´ íšë“                      â”‚
â”‚     _mockRepository.Object  â†’  IDataRepository íƒ€ì…            â”‚
â”‚                                                                â”‚
â”‚  3. UserServiceì— ì£¼ì…                                         â”‚
â”‚     new UserService(                                           â”‚
â”‚         _mockRepository.Object,    â† IDataRepository           â”‚
â”‚         _mockEmailService.Object,  â† IEmailService             â”‚
â”‚         _mockLogger.Object         â† ILogger                   â”‚
â”‚     );                                                         â”‚
â”‚                                                                â”‚
â”‚  ê²°ê³¼:                                                         â”‚
â”‚  UserServiceëŠ” ì‹¤ì œ DB, Email, Logger ëŒ€ì‹                      â”‚
â”‚  Mock ê°ì²´ë¥¼ ì‚¬ìš©í•˜ê²Œ ë¨!                                      â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 30. Setup ë©”ì„œë“œ ì´í•´

### Step 30.1: Setupì´ë€?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Setup ë©”ì„œë“œ                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  Mock ê°ì²´ê°€ íŠ¹ì • ë©”ì„œë“œ í˜¸ì¶œì— ì–´ë–»ê²Œ ì‘ë‹µí• ì§€ ì„¤ì •           â”‚
â”‚                                                                â”‚
â”‚  "GetById(1)ì´ í˜¸ì¶œë˜ë©´ ì´ User ê°ì²´ë¥¼ ë°˜í™˜í•´ë¼"              â”‚
â”‚                                                                â”‚
â”‚  ê¸°ë³¸ ë¬¸ë²•:                                                    â”‚
â”‚  mockObject.Setup(x => x.ë©”ì„œë“œ(ë§¤ê°œë³€ìˆ˜)).Returns(ë°˜í™˜ê°’);    â”‚
â”‚                                                                â”‚
â”‚  ì˜ˆì‹œ:                                                         â”‚
â”‚  _mockRepository                                               â”‚
â”‚      .Setup(x => x.GetById(1))                                 â”‚
â”‚      .Returns(new User { Id = 1, Name = "í™ê¸¸ë™" });           â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 30.2: Setup ë¬¸ë²• ë¶„ì„

```csharp
_mockRepository.Setup(x => x.GetById(1)).Returns(testUser);
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Setup ë¬¸ë²• ë¶„ì„                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  _mockRepository.Setup(x => x.GetById(1)).Returns(testUser);   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”¬â”€â”€ â”€â”¬â”€ â”€â”¬â”€ â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€ â”€â”€â”€â”¬â”€â”€â”€ â”€â”€â”€â”€â”¬â”€â”€â”€â”€     â”‚
â”‚        â”‚          â”‚    â”‚   â”‚      â”‚         â”‚        â”‚         â”‚
â”‚        â”‚          â”‚    â”‚   â”‚      â”‚         â”‚        â””â”€ ë°˜í™˜ê°’ â”‚
â”‚        â”‚          â”‚    â”‚   â”‚      â”‚         â”‚                  â”‚
â”‚        â”‚          â”‚    â”‚   â”‚      â”‚         â””â”€ ë°˜í™˜ ì„¤ì •       â”‚
â”‚        â”‚          â”‚    â”‚   â”‚      â”‚                            â”‚
â”‚        â”‚          â”‚    â”‚   â”‚      â””â”€ ë§¤ê°œë³€ìˆ˜ (1)             â”‚
â”‚        â”‚          â”‚    â”‚   â”‚                                   â”‚
â”‚        â”‚          â”‚    â”‚   â””â”€ ì„¤ì •í•  ë©”ì„œë“œ                   â”‚
â”‚        â”‚          â”‚    â”‚                                       â”‚
â”‚        â”‚          â”‚    â””â”€ ëŒë‹¤ ë§¤ê°œë³€ìˆ˜                       â”‚
â”‚        â”‚          â”‚                                            â”‚
â”‚        â”‚          â””â”€ ë™ì‘ ì„¤ì • ë©”ì„œë“œ                         â”‚
â”‚        â”‚                                                       â”‚
â”‚        â””â”€ Mock ê°ì²´                                           â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 31. Returns ë©”ì„œë“œ ì´í•´

### Step 31.1: Returns ì‚¬ìš©ë²•

```csharp
// 1. ê³ ì •ê°’ ë°˜í™˜
_mockRepository
    .Setup(x => x.GetById(1))
    .Returns(new User { Id = 1, Name = "í™ê¸¸ë™" });

// 2. null ë°˜í™˜
_mockRepository
    .Setup(x => x.GetById(999))
    .Returns((User)null);

// 3. ë§¤ê°œë³€ìˆ˜ë¥¼ ì‚¬ìš©í•œ ë™ì  ë°˜í™˜
_mockRepository
    .Setup(x => x.GetById(It.IsAny<int>()))
    .Returns((int id) => new User { Id = id, Name = $"User{id}" });

// 4. bool ë°˜í™˜
_mockRepository
    .Setup(x => x.ExistsByEmail("test@test.com"))
    .Returns(true);

// 5. ì»¬ë ‰ì…˜ ë°˜í™˜
_mockRepository
    .Setup(x => x.GetAll())
    .Returns(new List<User> { user1, user2, user3 });
```

---

## 32. Object ì†ì„± ì´í•´

### Step 32.1: Object ì†ì„±ì´ë€?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Mock<T>.Object ì†ì„±                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  Mock<T>ì—ì„œ ì‹¤ì œ T íƒ€ì…ì˜ ê°ì²´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì†ì„±                â”‚
â”‚                                                                â”‚
â”‚  Mock<IDataRepository> _mockRepository;                        â”‚
â”‚       â†“                                                        â”‚
â”‚  _mockRepository.Object  â†’  IDataRepository íƒ€ì…ì˜ ê°ì²´        â”‚
â”‚                                                                â”‚
â”‚  êµ¬ë¶„:                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ _mockRepository      â”‚ Mock ë˜í¼ ê°ì²´                   â”‚  â”‚
â”‚  â”‚                      â”‚ Setup, Verify ë“± ì„¤ì •ìš©          â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ _mockRepository.Objectâ”‚ ì‹¤ì œ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì²´          â”‚  â”‚
â”‚  â”‚                      â”‚ UserServiceì— ì£¼ì…í•  ë•Œ ì‚¬ìš©     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 32.2: ì‚¬ìš© ì˜ˆì‹œ

```csharp
// Mock ë˜í¼ - ì„¤ì •í•  ë•Œ ì‚¬ìš©
_mockRepository.Setup(x => x.GetById(1)).Returns(testUser);

// .Object - ì£¼ì…í•  ë•Œ ì‚¬ìš©
var service = new UserService(_mockRepository.Object, ...);
```

---

## 33. ì²« ë²ˆì§¸ Mock í…ŒìŠ¤íŠ¸ ì‘ì„±

### Step 33.1: ì „ì²´ í…ŒìŠ¤íŠ¸ ì½”ë“œ

```csharp
using System;
using Moq;
using NUnit.Framework;
using UserManagement.Interfaces;
using UserManagement.Models;
using UserManagement.Services;

namespace UserManagement.Tests
{
    [TestFixture]
    public class UserServiceTests
    {
        private Mock<IDataRepository> _mockRepository;
        private Mock<IEmailService> _mockEmailService;
        private Mock<ILogger> _mockLogger;
        private UserService _userService;
        
        [SetUp]
        public void SetUp()
        {
            // Mock ê°ì²´ ìƒì„±
            _mockRepository = new Mock<IDataRepository>();
            _mockEmailService = new Mock<IEmailService>();
            _mockLogger = new Mock<ILogger>();
            
            // í…ŒìŠ¤íŠ¸ ëŒ€ìƒ ìƒì„±
            _userService = new UserService(
                _mockRepository.Object,
                _mockEmailService.Object,
                _mockLogger.Object);
        }
        
        [Test]
        public void GetUserById_ExistingUser_ReturnsUser()
        {
            // Arrange
            var expectedUser = new User 
            { 
                Id = 1, 
                Name = "í™ê¸¸ë™", 
                Email = "hong@test.com" 
            };
            
            // Mock ì„¤ì •: GetById(1) í˜¸ì¶œ ì‹œ expectedUser ë°˜í™˜
            _mockRepository
                .Setup(x => x.GetById(1))
                .Returns(expectedUser);
            
            // Act
            var result = _userService.GetUserById(1);
            
            // Assert
            Assert.IsNotNull(result);
            Assert.AreEqual(1, result.Id);
            Assert.AreEqual("í™ê¸¸ë™", result.Name);
            Assert.AreEqual("hong@test.com", result.Email);
        }
        
        [Test]
        public void GetUserById_NonExistingUser_ReturnsNull()
        {
            // Arrange
            _mockRepository
                .Setup(x => x.GetById(999))
                .Returns((User)null);
            
            // Act
            var result = _userService.GetUserById(999);
            
            // Assert
            Assert.IsNull(result);
        }
    }
}
```

### Step 33.2: í…ŒìŠ¤íŠ¸ ì‹¤í–‰

`Ctrl + R, A`ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  í…ŒìŠ¤íŠ¸ íƒìƒ‰ê¸°                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  âœ… í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì™„ë£Œ: 2 í†µê³¼, 0 ì‹¤íŒ¨                           â”‚
â”‚                                                                â”‚
â”‚  â–¼ UserManagement.Tests                                        â”‚
â”‚    â–¼ UserServiceTests                                          â”‚
â”‚      âœ… GetUserById_ExistingUser_ReturnsUser                   â”‚
â”‚      âœ… GetUserById_NonExistingUser_ReturnsNull                â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

ì´ì–´ì„œ Part 3ë¥¼ ê³„ì† ì‘ì„±í•˜ê² ìŠµë‹ˆë‹¤.
# ğŸ§ª C# Moq ì™¸ë¶€ ì˜ì¡´ì„± ì²˜ë¦¬ ë”°ë¼í•˜ê¸° ì‹¤ìŠµ (ìƒì„¸ ë²„ì „) - Part 3

---

# Part 6: Setup ì‹¬í™”

---

## 34. It.IsAny ì‚¬ìš©ë²•

### Step 34.1: It.IsAnyë€?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  It.IsAny<T>()                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  "ì–´ë–¤ ê°’ì´ë“  ìƒê´€ì—†ì´" ë§¤ì¹­                                   â”‚
â”‚                                                                â”‚
â”‚  ì˜ˆì‹œ:                                                         â”‚
â”‚  Setup(x => x.GetById(It.IsAny<int>()))                        â”‚
â”‚                       â†‘                                        â”‚
â”‚              ì–´ë–¤ int ê°’ì´ë“  ë§¤ì¹­                              â”‚
â”‚                                                                â”‚
â”‚  GetById(1)   â†’ ë§¤ì¹­ âœ…                                        â”‚
â”‚  GetById(2)   â†’ ë§¤ì¹­ âœ…                                        â”‚
â”‚  GetById(100) â†’ ë§¤ì¹­ âœ…                                        â”‚
â”‚  GetById(999) â†’ ë§¤ì¹­ âœ…                                        â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 34.2: It.IsAny ì‚¬ìš© ì˜ˆì‹œ

```csharp
[Test]
public void GetUserById_AnyId_ReturnsUserWithThatId()
{
    // Arrange - ì–´ë–¤ IDë¡œ í˜¸ì¶œí•´ë„ í•´ë‹¹ IDë¥¼ ê°€ì§„ User ë°˜í™˜
    _mockRepository
        .Setup(x => x.GetById(It.IsAny<int>()))
        .Returns((int id) => new User { Id = id, Name = $"User{id}" });
    
    // Act
    var result1 = _userService.GetUserById(1);
    var result2 = _userService.GetUserById(100);
    
    // Assert
    Assert.AreEqual(1, result1.Id);
    Assert.AreEqual(100, result2.Id);
}
```

### Step 34.3: It.IsAny ë‹¤ì–‘í•œ íƒ€ì…

```csharp
// ì–´ë–¤ ë¬¸ìì—´ì´ë“ 
It.IsAny<string>()

// ì–´ë–¤ ì •ìˆ˜ë“ 
It.IsAny<int>()

// ì–´ë–¤ User ê°ì²´ë“ 
It.IsAny<User>()

// ì–´ë–¤ boolì´ë“ 
It.IsAny<bool>()

// ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ
_mockEmailService
    .Setup(x => x.SendEmail(
        It.IsAny<string>(),    // ì–´ë–¤ ìˆ˜ì‹ ìë“ 
        It.IsAny<string>(),    // ì–´ë–¤ ì œëª©ì´ë“ 
        It.IsAny<string>()))   // ì–´ë–¤ ë³¸ë¬¸ì´ë“ 
    .Returns(true);
```

---

## 35. It.Is ì‚¬ìš©ë²•

### Step 35.1: It.Isë€?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  It.Is<T>(ì¡°ê±´)                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  "íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ê°’ë§Œ" ë§¤ì¹­                              â”‚
â”‚                                                                â”‚
â”‚  ì˜ˆì‹œ:                                                         â”‚
â”‚  Setup(x => x.GetById(It.Is<int>(id => id > 0)))               â”‚
â”‚                                   â†‘                            â”‚
â”‚                           idê°€ 0ë³´ë‹¤ í´ ë•Œë§Œ ë§¤ì¹­              â”‚
â”‚                                                                â”‚
â”‚  GetById(1)   â†’ ë§¤ì¹­ âœ… (1 > 0)                                â”‚
â”‚  GetById(100) â†’ ë§¤ì¹­ âœ… (100 > 0)                              â”‚
â”‚  GetById(0)   â†’ ë§¤ì¹­ âŒ (0 > 0 ê±°ì§“)                           â”‚
â”‚  GetById(-1)  â†’ ë§¤ì¹­ âŒ (-1 > 0 ê±°ì§“)                          â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 35.2: It.Is ì‚¬ìš© ì˜ˆì‹œ

```csharp
[Test]
public void GetUserById_PositiveId_ReturnsUser()
{
    // Arrange - ì–‘ìˆ˜ IDë§Œ User ë°˜í™˜
    _mockRepository
        .Setup(x => x.GetById(It.Is<int>(id => id > 0)))
        .Returns(new User { Id = 1, Name = "í™ê¸¸ë™" });
    
    // 0 ì´í•˜ë©´ null ë°˜í™˜
    _mockRepository
        .Setup(x => x.GetById(It.Is<int>(id => id <= 0)))
        .Returns((User)null);
    
    // Act & Assert
    Assert.IsNotNull(_userService.GetUserById(1));
    Assert.IsNotNull(_userService.GetUserById(100));
    Assert.IsNull(_userService.GetUserById(0));
    Assert.IsNull(_userService.GetUserById(-1));
}
```

### Step 35.3: It.Is ë‹¤ì–‘í•œ ì¡°ê±´

```csharp
// IDê°€ 1ì—ì„œ 100 ì‚¬ì´
It.Is<int>(id => id >= 1 && id <= 100)

// ì´ë©”ì¼ í˜•ì‹ í™•ì¸
It.Is<string>(email => email.Contains("@"))

// íŠ¹ì • ë¬¸ìì—´ë¡œ ì‹œì‘
It.Is<string>(s => s.StartsWith("admin"))

// ë¹ˆ ë¬¸ìì—´ ì œì™¸
It.Is<string>(s => !string.IsNullOrEmpty(s))

// User ê°ì²´ì˜ ì†ì„± ì¡°ê±´
It.Is<User>(u => u.IsActive && u.Email != null)
```

---

## 36. ì—¬ëŸ¬ ë©”ì„œë“œ Setup

### Step 36.1: ë³µí•© Setup

```csharp
[Test]
public void CreateUser_ValidUser_SavesAndSendsEmail()
{
    // Arrange
    var newUser = new User 
    { 
        Name = "í™ê¸¸ë™", 
        Email = "hong@test.com" 
    };
    
    var savedUser = new User 
    { 
        Id = 1, 
        Name = "í™ê¸¸ë™", 
        Email = "hong@test.com" 
    };
    
    // ì—¬ëŸ¬ ë©”ì„œë“œ Setup
    _mockRepository
        .Setup(x => x.ExistsByEmail("hong@test.com"))
        .Returns(false);  // ì´ë©”ì¼ ì¤‘ë³µ ì—†ìŒ
    
    _mockRepository
        .Setup(x => x.Save(It.IsAny<User>()))
        .Returns(savedUser);  // ì €ì¥ í›„ ID í¬í•¨ëœ User ë°˜í™˜
    
    _mockEmailService
        .Setup(x => x.SendWelcomeEmail("hong@test.com", "í™ê¸¸ë™"))
        .Returns(true);  // ì´ë©”ì¼ ë°œì†¡ ì„±ê³µ
    
    // Act
    var result = _userService.CreateUser(newUser);
    
    // Assert
    Assert.AreEqual(1, result.Id);
    Assert.AreEqual("í™ê¸¸ë™", result.Name);
}
```

### Step 36.2: Setup ì²´ì¸ ì„¤ëª…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CreateUser í…ŒìŠ¤íŠ¸ì˜ Setup ì²´ì¸                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  CreateUser(user) í˜¸ì¶œ                                         â”‚
â”‚         â”‚                                                      â”‚
â”‚         â–¼                                                      â”‚
â”‚  â‘  ExistsByEmail("hong@test.com") í˜¸ì¶œ                         â”‚
â”‚     â””â”€â”€ Setup: Returns(false)                                  â”‚
â”‚         â”‚                                                      â”‚
â”‚         â–¼                                                      â”‚
â”‚  â‘¡ Save(user) í˜¸ì¶œ                                             â”‚
â”‚     â””â”€â”€ Setup: Returns(savedUser)                              â”‚
â”‚         â”‚                                                      â”‚
â”‚         â–¼                                                      â”‚
â”‚  â‘¢ SendWelcomeEmail("hong@test.com", "í™ê¸¸ë™") í˜¸ì¶œ            â”‚
â”‚     â””â”€â”€ Setup: Returns(true)                                   â”‚
â”‚         â”‚                                                      â”‚
â”‚         â–¼                                                      â”‚
â”‚     return savedUser                                           â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 37. Callback ì‚¬ìš©ë²•

### Step 37.1: Callbackì´ë€?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Callback ë©”ì„œë“œ                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  Mock ë©”ì„œë“œê°€ í˜¸ì¶œë  ë•Œ ì¶”ê°€ ë™ì‘ì„ ì‹¤í–‰                      â”‚
â”‚                                                                â”‚
â”‚  ìš©ë„:                                                         â”‚
â”‚  â€¢ í˜¸ì¶œëœ ë§¤ê°œë³€ìˆ˜ ìº¡ì²˜                                        â”‚
â”‚  â€¢ ë¶€ìˆ˜ íš¨ê³¼ ì‹œë®¬ë ˆì´ì…˜                                        â”‚
â”‚  â€¢ í˜¸ì¶œ íšŸìˆ˜ ì¹´ìš´íŠ¸                                            â”‚
â”‚  â€¢ ë””ë²„ê¹…ìš© ë¡œê·¸ ì¶œë ¥                                          â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 37.2: Callback ì‚¬ìš© ì˜ˆì‹œ

```csharp
[Test]
public void CreateUser_CapturesEmailParameters()
{
    // Arrange
    string capturedTo = null;
    string capturedName = null;
    
    _mockRepository
        .Setup(x => x.ExistsByEmail(It.IsAny<string>()))
        .Returns(false);
    
    _mockRepository
        .Setup(x => x.Save(It.IsAny<User>()))
        .Returns((User u) => { u.Id = 1; return u; });
    
    // Callbackìœ¼ë¡œ ë§¤ê°œë³€ìˆ˜ ìº¡ì²˜
    _mockEmailService
        .Setup(x => x.SendWelcomeEmail(It.IsAny<string>(), It.IsAny<string>()))
        .Callback<string, string>((to, name) => 
        {
            capturedTo = to;
            capturedName = name;
        })
        .Returns(true);
    
    var newUser = new User { Name = "í™ê¸¸ë™", Email = "hong@test.com" };
    
    // Act
    _userService.CreateUser(newUser);
    
    // Assert - ìº¡ì²˜ëœ ê°’ í™•ì¸
    Assert.AreEqual("hong@test.com", capturedTo);
    Assert.AreEqual("í™ê¸¸ë™", capturedName);
}
```

### Step 37.3: Callback ë¬¸ë²• ë¶„ì„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Callback ë¬¸ë²• ë¶„ì„                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  .Callback<string, string>((to, name) =>                       â”‚
â”‚  â”€â”€â”€â”¬â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€                          â”‚
â”‚      â”‚          â”‚             â”‚                                â”‚
â”‚      â”‚          â”‚             â””â”€ ëŒë‹¤ë¡œ ë™ì‘ ì •ì˜              â”‚
â”‚      â”‚          â”‚                                              â”‚
â”‚      â”‚          â””â”€ ë§¤ê°œë³€ìˆ˜ íƒ€ì… (ë©”ì„œë“œ ì‹œê·¸ë‹ˆì²˜ì™€ ì¼ì¹˜)      â”‚
â”‚      â”‚                                                         â”‚
â”‚      â””â”€ ì½œë°± ë©”ì„œë“œ                                            â”‚
â”‚                                                                â”‚
â”‚  ì‹¤í–‰ ìˆœì„œ:                                                    â”‚
â”‚  1. SendWelcomeEmail("hong@test.com", "í™ê¸¸ë™") í˜¸ì¶œ           â”‚
â”‚  2. Callback ì‹¤í–‰ â†’ capturedTo, capturedName ì„¤ì •              â”‚
â”‚  3. Returns(true) ì‹¤í–‰ â†’ true ë°˜í™˜                             â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 38. Throwsë¡œ ì˜ˆì™¸ ì„¤ì •

### Step 38.1: Throws ì‚¬ìš©ë²•

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Throws ë©”ì„œë“œ                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  Mock ë©”ì„œë“œ í˜¸ì¶œ ì‹œ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚´                           â”‚
â”‚                                                                â”‚
â”‚  ìš©ë„:                                                         â”‚
â”‚  â€¢ ì—ëŸ¬ ìƒí™© í…ŒìŠ¤íŠ¸                                            â”‚
â”‚  â€¢ ì˜ˆì™¸ ì²˜ë¦¬ ë¡œì§ í…ŒìŠ¤íŠ¸                                       â”‚
â”‚  â€¢ DB ì—°ê²° ì‹¤íŒ¨, ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ë“± ì‹œë®¬ë ˆì´ì…˜                   â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 38.2: Throws ì‚¬ìš© ì˜ˆì‹œ

```csharp
[Test]
public void GetUserById_RepositoryThrowsException_LogsErrorAndRethrows()
{
    // Arrange
    _mockRepository
        .Setup(x => x.GetById(It.IsAny<int>()))
        .Throws(new InvalidOperationException("DB ì—°ê²° ì‹¤íŒ¨"));
    
    // Act & Assert
    Assert.Throws<InvalidOperationException>(() => 
        _userService.GetUserById(1));
    
    // Verify - ì—ëŸ¬ ë¡œê·¸ê°€ ê¸°ë¡ë˜ì—ˆëŠ”ì§€ í™•ì¸
    _mockLogger.Verify(
        x => x.LogError(It.IsAny<string>(), It.IsAny<Exception>()), 
        Times.Once);
}

[Test]
public void CreateUser_SaveThrowsException_DoesNotSendEmail()
{
    // Arrange
    _mockRepository
        .Setup(x => x.ExistsByEmail(It.IsAny<string>()))
        .Returns(false);
    
    _mockRepository
        .Setup(x => x.Save(It.IsAny<User>()))
        .Throws(new Exception("ì €ì¥ ì‹¤íŒ¨"));
    
    var newUser = new User { Name = "í™ê¸¸ë™", Email = "hong@test.com" };
    
    // Act & Assert
    Assert.Throws<Exception>(() => _userService.CreateUser(newUser));
    
    // Verify - ì´ë©”ì¼ì€ ë°œì†¡ë˜ì§€ ì•Šì•„ì•¼ í•¨
    _mockEmailService.Verify(
        x => x.SendWelcomeEmail(It.IsAny<string>(), It.IsAny<string>()), 
        Times.Never);
}
```

---

## 39. ReturnsAsync ë¹„ë™ê¸° ì„¤ì •

### Step 39.1: ReturnsAsync ì‚¬ìš©ë²•

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ReturnsAsync ë©”ì„œë“œ                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  ë¹„ë™ê¸° ë©”ì„œë“œ (async/await) Mock ì‹œ ì‚¬ìš©                      â”‚
â”‚                                                                â”‚
â”‚  ì¼ë°˜ ë©”ì„œë“œ:    .Returns(ê°’)                                  â”‚
â”‚  ë¹„ë™ê¸° ë©”ì„œë“œ:  .ReturnsAsync(ê°’)                             â”‚
â”‚                                                                â”‚
â”‚  ë˜ëŠ”:                                                         â”‚
â”‚  .Returns(Task.FromResult(ê°’))                                 â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 39.2: ReturnsAsync ì‚¬ìš© ì˜ˆì‹œ

```csharp
[Test]
public async Task SendEmailAsync_Success_ReturnsTrue()
{
    // Arrange
    _mockEmailService
        .Setup(x => x.SendEmailAsync(
            It.IsAny<string>(), 
            It.IsAny<string>(), 
            It.IsAny<string>()))
        .ReturnsAsync(true);  // Task<bool>ì„ ë°˜í™˜í•˜ëŠ” ë¹„ë™ê¸° ë©”ì„œë“œ
    
    // Act
    var result = await _mockEmailService.Object
        .SendEmailAsync("test@test.com", "ì œëª©", "ë³¸ë¬¸");
    
    // Assert
    Assert.IsTrue(result);
}

// ThrowsAsync - ë¹„ë™ê¸° ì˜ˆì™¸ ì„¤ì •
[Test]
public void SendEmailAsync_Failure_ThrowsException()
{
    // Arrange
    _mockEmailService
        .Setup(x => x.SendEmailAsync(
            It.IsAny<string>(), 
            It.IsAny<string>(), 
            It.IsAny<string>()))
        .ThrowsAsync(new Exception("ì´ë©”ì¼ ì„œë²„ ì˜¤ë¥˜"));
    
    // Act & Assert
    Assert.ThrowsAsync<Exception>(async () => 
        await _mockEmailService.Object
            .SendEmailAsync("test@test.com", "ì œëª©", "ë³¸ë¬¸"));
}
```

---

# Part 7: Verify ê²€ì¦

---

## 40. Verifyë€?

### Step 40.1: Verifyì˜ ì •ì˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Verify ë©”ì„œë“œ                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  Mock ê°ì²´ì˜ ë©”ì„œë“œê°€ ì˜ˆìƒëŒ€ë¡œ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ ê²€ì¦               â”‚
â”‚                                                                â”‚
â”‚  í–‰ìœ„ ê²€ì¦ (Behavior Verification)ì˜ í•µì‹¬!                     â”‚
â”‚                                                                â”‚
â”‚  Setup:  "ì´ë ‡ê²Œ í˜¸ì¶œë˜ë©´ ì´ê²ƒì„ ë°˜í™˜í•´ë¼" (ì¤€ë¹„)              â”‚
â”‚  Verify: "ì´ ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ë¼" (ê²€ì¦)            â”‚
â”‚                                                                â”‚
â”‚  ê²€ì¦í•  ìˆ˜ ìˆëŠ” ê²ƒ:                                            â”‚
â”‚  â€¢ ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì—ˆëŠ”ê°€?                                      â”‚
â”‚  â€¢ ì–´ë–¤ ë§¤ê°œë³€ìˆ˜ë¡œ í˜¸ì¶œë˜ì—ˆëŠ”ê°€?                               â”‚
â”‚  â€¢ ëª‡ ë²ˆ í˜¸ì¶œë˜ì—ˆëŠ”ê°€?                                         â”‚
â”‚  â€¢ í˜¸ì¶œë˜ì§€ ì•Šì•˜ëŠ”ê°€?                                          â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 40.2: Setup vs Verify

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Setup vs Verify ë¹„êµ                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     Setup        â”‚              Verify                  â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ í…ŒìŠ¤íŠ¸ ì‹œì‘ ì „   â”‚ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ í›„                       â”‚  â”‚
â”‚  â”‚ "ì¤€ë¹„" ë‹¨ê³„      â”‚ "ê²€ì¦" ë‹¨ê³„                          â”‚  â”‚
â”‚  â”‚ ë™ì‘ ì •ì˜        â”‚ ë™ì‘ í™•ì¸                            â”‚  â”‚
â”‚  â”‚ Returns ì‚¬ìš©     â”‚ Times ì‚¬ìš©                           â”‚  â”‚
â”‚  â”‚ ì„ íƒì            â”‚ í•„ìš”ì‹œ ì‚¬ìš©                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                â”‚
â”‚  ì˜ˆì‹œ:                                                         â”‚
â”‚  [Test]                                                        â”‚
â”‚  public void CreateUser_SavesAndSendsEmail()                   â”‚
â”‚  {                                                             â”‚
â”‚      // Setup - ì¤€ë¹„                                           â”‚
â”‚      _mockRepository.Setup(...).Returns(...);                  â”‚
â”‚      _mockEmailService.Setup(...).Returns(...);                â”‚
â”‚                                                                â”‚
â”‚      // Act - ì‹¤í–‰                                             â”‚
â”‚      _userService.CreateUser(user);                            â”‚
â”‚                                                                â”‚
â”‚      // Verify - ê²€ì¦                                          â”‚
â”‚      _mockRepository.Verify(x => x.Save(...), Times.Once);     â”‚
â”‚      _mockEmailService.Verify(x => x.SendEmail(...), Times.Once);
â”‚  }                                                             â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 41. Verify ê¸°ë³¸ ì‚¬ìš©ë²•

### Step 41.1: Verify ë¬¸ë²•

```csharp
// ê¸°ë³¸ ë¬¸ë²•
mockObject.Verify(x => x.ë©”ì„œë“œ(ë§¤ê°œë³€ìˆ˜));

// í˜¸ì¶œ íšŸìˆ˜ ì§€ì •
mockObject.Verify(x => x.ë©”ì„œë“œ(ë§¤ê°œë³€ìˆ˜), Times.Once());
```

### Step 41.2: Verify ì‚¬ìš© ì˜ˆì‹œ

```csharp
[Test]
public void CreateUser_ValidUser_CallsSaveAndSendEmail()
{
    // Arrange
    var newUser = new User { Name = "í™ê¸¸ë™", Email = "hong@test.com" };
    
    _mockRepository
        .Setup(x => x.ExistsByEmail(It.IsAny<string>()))
        .Returns(false);
    
    _mockRepository
        .Setup(x => x.Save(It.IsAny<User>()))
        .Returns((User u) => { u.Id = 1; return u; });
    
    _mockEmailService
        .Setup(x => x.SendWelcomeEmail(It.IsAny<string>(), It.IsAny<string>()))
        .Returns(true);
    
    // Act
    _userService.CreateUser(newUser);
    
    // Assert - Verifyë¡œ ë©”ì„œë“œ í˜¸ì¶œ ê²€ì¦
    _mockRepository.Verify(
        x => x.ExistsByEmail("hong@test.com"));  // ì´ë©”ì¼ ì¤‘ë³µ í™•ì¸ í˜¸ì¶œë¨
    
    _mockRepository.Verify(
        x => x.Save(It.IsAny<User>()));  // Save í˜¸ì¶œë¨
    
    _mockEmailService.Verify(
        x => x.SendWelcomeEmail("hong@test.com", "í™ê¸¸ë™"));  // ì´ë©”ì¼ ë°œì†¡ í˜¸ì¶œë¨
}
```

---

## 42. Times.Once ì‚¬ìš©ë²•

### Step 42.1: Times.Onceë€?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Times.Once()                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  "ì •í™•íˆ 1ë²ˆ í˜¸ì¶œë˜ì–´ì•¼ í•œë‹¤"                                  â”‚
â”‚                                                                â”‚
â”‚  _mockRepository.Verify(x => x.Save(user), Times.Once());      â”‚
â”‚                                              â†‘                 â”‚
â”‚                                     ì •í™•íˆ 1ë²ˆ í˜¸ì¶œ ê²€ì¦       â”‚
â”‚                                                                â”‚
â”‚  0ë²ˆ í˜¸ì¶œ â†’ ì‹¤íŒ¨ âŒ                                            â”‚
â”‚  1ë²ˆ í˜¸ì¶œ â†’ ì„±ê³µ âœ…                                            â”‚
â”‚  2ë²ˆ í˜¸ì¶œ â†’ ì‹¤íŒ¨ âŒ                                            â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 42.2: Times.Once ì‚¬ìš© ì˜ˆì‹œ

```csharp
[Test]
public void CreateUser_SaveCalledExactlyOnce()
{
    // Arrange
    var newUser = new User { Name = "í™ê¸¸ë™", Email = "hong@test.com" };
    
    _mockRepository.Setup(x => x.ExistsByEmail(It.IsAny<string>())).Returns(false);
    _mockRepository.Setup(x => x.Save(It.IsAny<User>()))
        .Returns((User u) => { u.Id = 1; return u; });
    _mockEmailService.Setup(x => x.SendWelcomeEmail(It.IsAny<string>(), It.IsAny<string>()))
        .Returns(true);
    
    // Act
    _userService.CreateUser(newUser);
    
    // Assert - Saveê°€ ì •í™•íˆ 1ë²ˆ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ ê²€ì¦
    _mockRepository.Verify(
        x => x.Save(It.IsAny<User>()), 
        Times.Once());  // ë˜ëŠ” Times.Once
}
```

---

## 43. Times.Never ì‚¬ìš©ë²•

### Step 43.1: Times.Neverë€?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Times.Never()                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  "í•œ ë²ˆë„ í˜¸ì¶œë˜ì§€ ì•Šì•„ì•¼ í•œë‹¤"                                â”‚
â”‚                                                                â”‚
â”‚  _mockEmailService.Verify(x => x.SendEmail(...), Times.Never());
â”‚                                                   â†‘            â”‚
â”‚                                        í˜¸ì¶œ ì•ˆ ë¨ ê²€ì¦         â”‚
â”‚                                                                â”‚
â”‚  0ë²ˆ í˜¸ì¶œ â†’ ì„±ê³µ âœ…                                            â”‚
â”‚  1ë²ˆ ì´ìƒ í˜¸ì¶œ â†’ ì‹¤íŒ¨ âŒ                                       â”‚
â”‚                                                                â”‚
â”‚  ì‚¬ìš© ìƒí™©:                                                    â”‚
â”‚  â€¢ íŠ¹ì • ì¡°ê±´ì—ì„œ ë©”ì„œë“œê°€ í˜¸ì¶œë˜ë©´ ì•ˆ ë˜ëŠ” ê²½ìš°                â”‚
â”‚  â€¢ ì˜ˆì™¸ ë°œìƒ ì‹œ í›„ì† ë™ì‘ì´ ì‹¤í–‰ë˜ì§€ ì•Šì•„ì•¼ í•˜ëŠ” ê²½ìš°          â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 43.2: Times.Never ì‚¬ìš© ì˜ˆì‹œ

```csharp
[Test]
public void CreateUser_DuplicateEmail_DoesNotSaveOrSendEmail()
{
    // Arrange
    var newUser = new User { Name = "í™ê¸¸ë™", Email = "existing@test.com" };
    
    // ì´ë©”ì¼ ì¤‘ë³µ - true ë°˜í™˜
    _mockRepository
        .Setup(x => x.ExistsByEmail("existing@test.com"))
        .Returns(true);
    
    // Act & Assert
    Assert.Throws<InvalidOperationException>(() => 
        _userService.CreateUser(newUser));
    
    // Verify - ì¤‘ë³µ ì´ë©”ì¼ì´ë©´ Saveì™€ SendEmailì´ í˜¸ì¶œë˜ì§€ ì•Šì•„ì•¼ í•¨
    _mockRepository.Verify(
        x => x.Save(It.IsAny<User>()), 
        Times.Never());  // Save í˜¸ì¶œ ì•ˆ ë¨
    
    _mockEmailService.Verify(
        x => x.SendWelcomeEmail(It.IsAny<string>(), It.IsAny<string>()), 
        Times.Never());  // ì´ë©”ì¼ ë°œì†¡ ì•ˆ ë¨
}
```

---

## 44. Times.Exactly ì‚¬ìš©ë²•

### Step 44.1: Times.Exactlyë€?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Times.Exactly(n)                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  "ì •í™•íˆ në²ˆ í˜¸ì¶œë˜ì–´ì•¼ í•œë‹¤"                                  â”‚
â”‚                                                                â”‚
â”‚  Times.Exactly(3)  â†’  ì •í™•íˆ 3ë²ˆ í˜¸ì¶œ                          â”‚
â”‚                                                                â”‚
â”‚  2ë²ˆ í˜¸ì¶œ â†’ ì‹¤íŒ¨ âŒ                                            â”‚
â”‚  3ë²ˆ í˜¸ì¶œ â†’ ì„±ê³µ âœ…                                            â”‚
â”‚  4ë²ˆ í˜¸ì¶œ â†’ ì‹¤íŒ¨ âŒ                                            â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 44.2: Times.Exactly ì‚¬ìš© ì˜ˆì‹œ

```csharp
[Test]
public void ProcessUsers_ThreeUsers_LogsThreeTimes()
{
    // Arrange
    var users = new List<User>
    {
        new User { Id = 1, Name = "User1" },
        new User { Id = 2, Name = "User2" },
        new User { Id = 3, Name = "User3" }
    };
    
    // (ProcessUsers ë©”ì„œë“œê°€ ìˆë‹¤ê³  ê°€ì •)
    // Act - 3ëª…ì˜ ì‚¬ìš©ì ì²˜ë¦¬
    
    // Assert - LogInfoê°€ ì •í™•íˆ 3ë²ˆ í˜¸ì¶œë¨
    _mockLogger.Verify(
        x => x.LogInfo(It.IsAny<string>()), 
        Times.Exactly(3));
}
```

---

## 45. Times.AtLeast ì‚¬ìš©ë²•

### Step 45.1: Times.AtLeast / Times.AtMost

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Times.AtLeast(n) / Times.AtMost(n)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  Times.AtLeast(n)  â†’  ìµœì†Œ në²ˆ ì´ìƒ                            â”‚
â”‚  Times.AtMost(n)   â†’  ìµœëŒ€ në²ˆ ì´í•˜                            â”‚
â”‚                                                                â”‚
â”‚  Times.AtLeast(2):                                             â”‚
â”‚  1ë²ˆ í˜¸ì¶œ â†’ ì‹¤íŒ¨ âŒ                                            â”‚
â”‚  2ë²ˆ í˜¸ì¶œ â†’ ì„±ê³µ âœ…                                            â”‚
â”‚  3ë²ˆ í˜¸ì¶œ â†’ ì„±ê³µ âœ…                                            â”‚
â”‚  5ë²ˆ í˜¸ì¶œ â†’ ì„±ê³µ âœ…                                            â”‚
â”‚                                                                â”‚
â”‚  Times.AtMost(3):                                              â”‚
â”‚  1ë²ˆ í˜¸ì¶œ â†’ ì„±ê³µ âœ…                                            â”‚
â”‚  3ë²ˆ í˜¸ì¶œ â†’ ì„±ê³µ âœ…                                            â”‚
â”‚  4ë²ˆ í˜¸ì¶œ â†’ ì‹¤íŒ¨ âŒ                                            â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 45.2: ì‚¬ìš© ì˜ˆì‹œ

```csharp
[Test]
public void CreateUser_LogsAtLeastTwice()
{
    // Arrange
    var newUser = new User { Name = "í™ê¸¸ë™", Email = "hong@test.com" };
    
    _mockRepository.Setup(x => x.ExistsByEmail(It.IsAny<string>())).Returns(false);
    _mockRepository.Setup(x => x.Save(It.IsAny<User>()))
        .Returns((User u) => { u.Id = 1; return u; });
    _mockEmailService.Setup(x => x.SendWelcomeEmail(It.IsAny<string>(), It.IsAny<string>()))
        .Returns(true);
    
    // Act
    _userService.CreateUser(newUser);
    
    // Assert - LogInfoê°€ ìµœì†Œ 2ë²ˆ ì´ìƒ í˜¸ì¶œë¨
    _mockLogger.Verify(
        x => x.LogInfo(It.IsAny<string>()), 
        Times.AtLeast(2));
}
```

### Step 45.3: Times ì˜µì…˜ ìš”ì•½

| Times ì˜µì…˜ | ì„¤ëª… | ì˜ˆì‹œ |
|-----------|------|------|
| `Times.Once()` | ì •í™•íˆ 1ë²ˆ | 1ë²ˆë§Œ ì„±ê³µ |
| `Times.Never()` | 0ë²ˆ (í˜¸ì¶œ ì•ˆ ë¨) | 0ë²ˆë§Œ ì„±ê³µ |
| `Times.Exactly(n)` | ì •í™•íˆ në²ˆ | në²ˆë§Œ ì„±ê³µ |
| `Times.AtLeast(n)` | ìµœì†Œ në²ˆ ì´ìƒ | në²ˆ ì´ìƒì´ë©´ ì„±ê³µ |
| `Times.AtMost(n)` | ìµœëŒ€ në²ˆ ì´í•˜ | në²ˆ ì´í•˜ë©´ ì„±ê³µ |
| `Times.AtLeastOnce()` | ìµœì†Œ 1ë²ˆ ì´ìƒ | 1ë²ˆ ì´ìƒì´ë©´ ì„±ê³µ |
| `Times.Between(m, n, Range)` | m~në²ˆ ì‚¬ì´ | m~n ë²”ìœ„ë©´ ì„±ê³µ |

---

## 46. VerifyAll ì‚¬ìš©ë²•

### Step 46.1: VerifyAllì´ë€?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VerifyAll()                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  Setupëœ ëª¨ë“  ë©”ì„œë“œê°€ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ í•œ ë²ˆì— ê²€ì¦               â”‚
â”‚                                                                â”‚
â”‚  mockObject.VerifyAll();                                       â”‚
â”‚                                                                â”‚
â”‚  Setupëœ ë©”ì„œë“œê°€ í•˜ë‚˜ë¼ë„ í˜¸ì¶œ ì•ˆ ë˜ë©´ ì‹¤íŒ¨!                  â”‚
â”‚                                                                â”‚
â”‚  ì˜ˆì‹œ:                                                         â”‚
â”‚  _mockRepository.Setup(x => x.GetById(1)).Returns(user);       â”‚
â”‚  _mockRepository.Setup(x => x.Save(user)).Returns(true);       â”‚
â”‚                                                                â”‚
â”‚  // í…ŒìŠ¤íŠ¸ ì‹¤í–‰...                                             â”‚
â”‚                                                                â”‚
â”‚  _mockRepository.VerifyAll();                                  â”‚
â”‚  â†’ GetById(1)ê³¼ Save(user) ëª¨ë‘ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ í™•ì¸              â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 46.2: VerifyAll ì‚¬ìš© ì˜ˆì‹œ

```csharp
[Test]
public void CreateUser_AllSetupMethodsCalled()
{
    // Arrange
    var newUser = new User { Name = "í™ê¸¸ë™", Email = "hong@test.com" };
    
    _mockRepository
        .Setup(x => x.ExistsByEmail("hong@test.com"))
        .Returns(false);
    
    _mockRepository
        .Setup(x => x.Save(It.IsAny<User>()))
        .Returns((User u) => { u.Id = 1; return u; });
    
    _mockEmailService
        .Setup(x => x.SendWelcomeEmail("hong@test.com", "í™ê¸¸ë™"))
        .Returns(true);
    
    // Act
    _userService.CreateUser(newUser);
    
    // Assert - ëª¨ë“  Setupì´ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ ê²€ì¦
    _mockRepository.VerifyAll();
    _mockEmailService.VerifyAll();
}
```

---

## 47. VerifyNoOtherCalls ì‚¬ìš©ë²•

### Step 47.1: VerifyNoOtherCallsë€?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VerifyNoOtherCalls()                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  Verifyë¡œ ê²€ì¦í•œ ê²ƒ ì™¸ì— ë‹¤ë¥¸ í˜¸ì¶œì´ ì—†ì—ˆëŠ”ì§€ í™•ì¸             â”‚
â”‚                                                                â”‚
â”‚  "ì˜ë„í•˜ì§€ ì•Šì€ ë©”ì„œë“œ í˜¸ì¶œì´ ìˆì—ˆëŠ”ì§€" ê²€ì¦                   â”‚
â”‚                                                                â”‚
â”‚  ì˜ˆì‹œ:                                                         â”‚
â”‚  _mockRepository.Verify(x => x.GetById(1), Times.Once());      â”‚
â”‚  _mockRepository.VerifyNoOtherCalls();                         â”‚
â”‚  â†’ GetById(1) ì™¸ì— ë‹¤ë¥¸ í˜¸ì¶œì´ ìˆìœ¼ë©´ ì‹¤íŒ¨!                    â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 47.2: VerifyNoOtherCalls ì‚¬ìš© ì˜ˆì‹œ

```csharp
[Test]
public void GetUserById_OnlyCallsGetById()
{
    // Arrange
    var user = new User { Id = 1, Name = "í™ê¸¸ë™" };
    _mockRepository.Setup(x => x.GetById(1)).Returns(user);
    
    // Act
    _userService.GetUserById(1);
    
    // Assert - GetByIdë§Œ í˜¸ì¶œë˜ê³  ë‹¤ë¥¸ ë©”ì„œë“œëŠ” í˜¸ì¶œ ì•ˆ ë¨
    _mockRepository.Verify(x => x.GetById(1), Times.Once());
    _mockRepository.VerifyNoOtherCalls();  // Save, Delete ë“± í˜¸ì¶œ ì•ˆ ë¨
}
```

---

# Part 8: ì‹¤ì „ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

---

## 48. ë°ì´í„°ë² ì´ìŠ¤ ì˜ì¡´ì„± ê²©ë¦¬

### Step 48.1: DB ì˜ì¡´ì„± ê²©ë¦¬ íŒ¨í„´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ë°ì´í„°ë² ì´ìŠ¤ ì˜ì¡´ì„± ê²©ë¦¬                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  ì‹¤ì œ í™˜ê²½:                                                    â”‚
â”‚  UserService â†’ SqlRepository â†’ SQL Server                      â”‚
â”‚                                  â†‘                             â”‚
â”‚                        ì‹¤ì œ DB ì—°ê²° (ëŠë¦¼, ë¶ˆì•ˆì •)             â”‚
â”‚                                                                â”‚
â”‚  í…ŒìŠ¤íŠ¸ í™˜ê²½:                                                  â”‚
â”‚  UserService â†’ Mock<IDataRepository>                           â”‚
â”‚                           â†‘                                    â”‚
â”‚                  ê°€ì§œ ì‘ë‹µ (ë¹ ë¦„, ì•ˆì •ì )                      â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 48.2: DB ê´€ë ¨ í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ

```csharp
[TestFixture]
public class UserServiceDatabaseTests
{
    private Mock<IDataRepository> _mockRepository;
    private Mock<IEmailService> _mockEmailService;
    private Mock<ILogger> _mockLogger;
    private UserService _userService;
    
    [SetUp]
    public void SetUp()
    {
        _mockRepository = new Mock<IDataRepository>();
        _mockEmailService = new Mock<IEmailService>();
        _mockLogger = new Mock<ILogger>();
        
        _userService = new UserService(
            _mockRepository.Object,
            _mockEmailService.Object,
            _mockLogger.Object);
    }
    
    [Test]
    public void GetUserById_UserExists_ReturnsUser()
    {
        // Arrange - DBì—ì„œ ì‚¬ìš©ìë¥¼ ì°¾ì€ ìƒí™© ì‹œë®¬ë ˆì´ì…˜
        var expectedUser = new User { Id = 1, Name = "í™ê¸¸ë™" };
        _mockRepository.Setup(x => x.GetById(1)).Returns(expectedUser);
        
        // Act
        var result = _userService.GetUserById(1);
        
        // Assert
        Assert.AreEqual(expectedUser, result);
    }
    
    [Test]
    public void GetUserById_UserNotExists_ReturnsNull()
    {
        // Arrange - DBì—ì„œ ì‚¬ìš©ìë¥¼ ì°¾ì§€ ëª»í•œ ìƒí™© ì‹œë®¬ë ˆì´ì…˜
        _mockRepository.Setup(x => x.GetById(999)).Returns((User)null);
        
        // Act
        var result = _userService.GetUserById(999);
        
        // Assert
        Assert.IsNull(result);
    }
    
    [Test]
    public void GetUserById_DatabaseError_ThrowsException()
    {
        // Arrange - DB ì—°ê²° ì˜¤ë¥˜ ìƒí™© ì‹œë®¬ë ˆì´ì…˜
        _mockRepository
            .Setup(x => x.GetById(It.IsAny<int>()))
            .Throws(new InvalidOperationException("DB ì—°ê²° ì‹¤íŒ¨"));
        
        // Act & Assert
        Assert.Throws<InvalidOperationException>(() => 
            _userService.GetUserById(1));
    }
}
```

---

## 49. API í˜¸ì¶œ ì˜ì¡´ì„± ê²©ë¦¬

### Step 49.1: ì™¸ë¶€ API ì¸í„°í˜ì´ìŠ¤ ì¶”ê°€

```csharp
// IExternalApiService.cs
public interface IExternalApiService
{
    /// <summary>
    /// ì™¸ë¶€ APIì—ì„œ ì‚¬ìš©ì ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
    /// </summary>
    UserDto GetUserFromExternalApi(string externalId);
    
    /// <summary>
    /// ì™¸ë¶€ APIë¡œ ë°ì´í„°ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤.
    /// </summary>
    bool SendDataToExternalApi(object data);
    
    /// <summary>
    /// ê²°ì œ APIë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
    /// </summary>
    PaymentResult ProcessPayment(PaymentRequest request);
}
```

### Step 49.2: API ì˜ì¡´ì„± í…ŒìŠ¤íŠ¸

```csharp
[Test]
public void ProcessPayment_ApiSuccess_ReturnsSuccessResult()
{
    // Arrange
    var mockPaymentApi = new Mock<IExternalApiService>();
    
    var request = new PaymentRequest { Amount = 10000, CardNumber = "1234" };
    var expectedResult = new PaymentResult 
    { 
        Success = true, 
        TransactionId = "TX123" 
    };
    
    mockPaymentApi
        .Setup(x => x.ProcessPayment(It.IsAny<PaymentRequest>()))
        .Returns(expectedResult);
    
    // Act
    var result = mockPaymentApi.Object.ProcessPayment(request);
    
    // Assert
    Assert.IsTrue(result.Success);
    Assert.AreEqual("TX123", result.TransactionId);
}

[Test]
public void ProcessPayment_ApiTimeout_ThrowsException()
{
    // Arrange - API íƒ€ì„ì•„ì›ƒ ìƒí™© ì‹œë®¬ë ˆì´ì…˜
    var mockPaymentApi = new Mock<IExternalApiService>();
    
    mockPaymentApi
        .Setup(x => x.ProcessPayment(It.IsAny<PaymentRequest>()))
        .Throws(new TimeoutException("API ì‘ë‹µ ì‹œê°„ ì´ˆê³¼"));
    
    // Act & Assert
    Assert.Throws<TimeoutException>(() => 
        mockPaymentApi.Object.ProcessPayment(new PaymentRequest()));
}

[Test]
public void ProcessPayment_ApiReturnsError_HandlesGracefully()
{
    // Arrange - API ì˜¤ë¥˜ ì‘ë‹µ ì‹œë®¬ë ˆì´ì…˜
    var mockPaymentApi = new Mock<IExternalApiService>();
    
    var errorResult = new PaymentResult 
    { 
        Success = false, 
        ErrorMessage = "ì”ì•¡ ë¶€ì¡±" 
    };
    
    mockPaymentApi
        .Setup(x => x.ProcessPayment(It.IsAny<PaymentRequest>()))
        .Returns(errorResult);
    
    // Act
    var result = mockPaymentApi.Object.ProcessPayment(new PaymentRequest());
    
    // Assert
    Assert.IsFalse(result.Success);
    Assert.AreEqual("ì”ì•¡ ë¶€ì¡±", result.ErrorMessage);
}
```

---

## 50. ì´ë©”ì¼ ì„œë¹„ìŠ¤ ì˜ì¡´ì„± ê²©ë¦¬

### Step 50.1: ì´ë©”ì¼ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

```csharp
[TestFixture]
public class UserServiceEmailTests
{
    private Mock<IDataRepository> _mockRepository;
    private Mock<IEmailService> _mockEmailService;
    private Mock<ILogger> _mockLogger;
    private UserService _userService;
    
    [SetUp]
    public void SetUp()
    {
        _mockRepository = new Mock<IDataRepository>();
        _mockEmailService = new Mock<IEmailService>();
        _mockLogger = new Mock<ILogger>();
        
        _userService = new UserService(
            _mockRepository.Object,
            _mockEmailService.Object,
            _mockLogger.Object);
    }
    
    [Test]
    public void CreateUser_Success_SendsWelcomeEmail()
    {
        // Arrange
        var newUser = new User { Name = "í™ê¸¸ë™", Email = "hong@test.com" };
        
        _mockRepository.Setup(x => x.ExistsByEmail(It.IsAny<string>())).Returns(false);
        _mockRepository.Setup(x => x.Save(It.IsAny<User>()))
            .Returns((User u) => { u.Id = 1; return u; });
        _mockEmailService.Setup(x => x.SendWelcomeEmail(It.IsAny<string>(), It.IsAny<string>()))
            .Returns(true);
        
        // Act
        _userService.CreateUser(newUser);
        
        // Assert - í™˜ì˜ ì´ë©”ì¼ì´ ì˜¬ë°”ë¥¸ ì£¼ì†Œë¡œ ë°œì†¡ë¨
        _mockEmailService.Verify(
            x => x.SendWelcomeEmail("hong@test.com", "í™ê¸¸ë™"), 
            Times.Once());
    }
    
    [Test]
    public void CreateUser_EmailFailure_UserStillCreated()
    {
        // Arrange - ì´ë©”ì¼ ë°œì†¡ ì‹¤íŒ¨í•´ë„ ì‚¬ìš©ìëŠ” ìƒì„±ë¨
        var newUser = new User { Name = "í™ê¸¸ë™", Email = "hong@test.com" };
        
        _mockRepository.Setup(x => x.ExistsByEmail(It.IsAny<string>())).Returns(false);
        _mockRepository.Setup(x => x.Save(It.IsAny<User>()))
            .Returns((User u) => { u.Id = 1; return u; });
        _mockEmailService.Setup(x => x.SendWelcomeEmail(It.IsAny<string>(), It.IsAny<string>()))
            .Returns(false);  // ì´ë©”ì¼ ë°œì†¡ ì‹¤íŒ¨
        
        // Act
        var result = _userService.CreateUser(newUser);
        
        // Assert
        Assert.IsNotNull(result);
        Assert.AreEqual(1, result.Id);
        
        // ì´ë©”ì¼ì€ ë°œì†¡ ì‹œë„í•¨
        _mockEmailService.Verify(
            x => x.SendWelcomeEmail("hong@test.com", "í™ê¸¸ë™"), 
            Times.Once());
    }
}
```

---

## 51. ë¡œê¹… ì˜ì¡´ì„± ê²©ë¦¬

### Step 51.1: ë¡œê¹… í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

```csharp
[Test]
public void GetUserById_Success_LogsInfo()
{
    // Arrange
    var user = new User { Id = 1, Name = "í™ê¸¸ë™" };
    _mockRepository.Setup(x => x.GetById(1)).Returns(user);
    
    // Act
    _userService.GetUserById(1);
    
    // Assert - ì •ë³´ ë¡œê·¸ê°€ ê¸°ë¡ë¨
    _mockLogger.Verify(
        x => x.LogInfo(It.Is<string>(s => s.Contains("ì¡°íšŒ ì‹œì‘"))), 
        Times.Once());
    
    _mockLogger.Verify(
        x => x.LogInfo(It.Is<string>(s => s.Contains("ì¡°íšŒ ì„±ê³µ"))), 
        Times.Once());
}

[Test]
public void GetUserById_NotFound_LogsWarning()
{
    // Arrange
    _mockRepository.Setup(x => x.GetById(999)).Returns((User)null);
    
    // Act
    _userService.GetUserById(999);
    
    // Assert - ê²½ê³  ë¡œê·¸ê°€ ê¸°ë¡ë¨
    _mockLogger.Verify(
        x => x.LogWarning(It.Is<string>(s => s.Contains("ì°¾ì„ ìˆ˜ ì—†ìŒ"))), 
        Times.Once());
}

[Test]
public void GetUserById_Exception_LogsError()
{
    // Arrange
    _mockRepository
        .Setup(x => x.GetById(It.IsAny<int>()))
        .Throws(new Exception("DB ì˜¤ë¥˜"));
    
    // Act & Assert
    Assert.Throws<Exception>(() => _userService.GetUserById(1));
    
    // ì—ëŸ¬ ë¡œê·¸ê°€ ê¸°ë¡ë¨
    _mockLogger.Verify(
        x => x.LogError(It.IsAny<string>(), It.IsAny<Exception>()), 
        Times.Once());
}
```

---

## 52. ì—¬ëŸ¬ ì˜ì¡´ì„± ì¡°í•© í…ŒìŠ¤íŠ¸

### Step 52.1: ë³µí•© ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸

```csharp
[Test]
public void CreateUser_CompleteScenario_AllDependenciesInteract()
{
    // Arrange
    var newUser = new User 
    { 
        Name = "í™ê¸¸ë™", 
        Email = "hong@test.com" 
    };
    
    // ëª¨ë“  ì˜ì¡´ì„± Setup
    _mockRepository
        .Setup(x => x.ExistsByEmail("hong@test.com"))
        .Returns(false);
    
    _mockRepository
        .Setup(x => x.Save(It.IsAny<User>()))
        .Returns((User u) => 
        {
            u.Id = 1;
            return u;
        });
    
    _mockEmailService
        .Setup(x => x.SendWelcomeEmail("hong@test.com", "í™ê¸¸ë™"))
        .Returns(true);
    
    // Act
    var result = _userService.CreateUser(newUser);
    
    // Assert - ê²°ê³¼ ê²€ì¦
    Assert.IsNotNull(result);
    Assert.AreEqual(1, result.Id);
    Assert.IsTrue(result.IsActive);
    
    // Verify - ëª¨ë“  ì˜ì¡´ì„± í˜¸ì¶œ ê²€ì¦
    
    // 1. ì´ë©”ì¼ ì¤‘ë³µ í™•ì¸ í˜¸ì¶œë¨
    _mockRepository.Verify(
        x => x.ExistsByEmail("hong@test.com"), 
        Times.Once());
    
    // 2. ì €ì¥ í˜¸ì¶œë¨
    _mockRepository.Verify(
        x => x.Save(It.Is<User>(u => u.Email == "hong@test.com")), 
        Times.Once());
    
    // 3. í™˜ì˜ ì´ë©”ì¼ ë°œì†¡ë¨
    _mockEmailService.Verify(
        x => x.SendWelcomeEmail("hong@test.com", "í™ê¸¸ë™"), 
        Times.Once());
    
    // 4. ë¡œê·¸ ê¸°ë¡ë¨ (ìµœì†Œ 2ë²ˆ)
    _mockLogger.Verify(
        x => x.LogInfo(It.IsAny<string>()), 
        Times.AtLeast(2));
}
```

---

ì´ì–´ì„œ Part 4ë¥¼ ê³„ì† ì‘ì„±í•˜ê² ìŠµë‹ˆë‹¤.
# ğŸ§ª C# Moq ì™¸ë¶€ ì˜ì¡´ì„± ì²˜ë¦¬ ë”°ë¼í•˜ê¸° ì‹¤ìŠµ (ìƒì„¸ ë²„ì „) - Part 4

---

# Part 9: ê³ ê¸‰ ê¸°ëŠ¥

---

## 53. Sequential Returns ì„¤ì •

### Step 53.1: SetupSequenceë€?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SetupSequence                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  ê°™ì€ ë©”ì„œë“œ í˜¸ì¶œì— ëŒ€í•´ ìˆœì°¨ì ìœ¼ë¡œ ë‹¤ë¥¸ ê°’ì„ ë°˜í™˜             â”‚
â”‚                                                                â”‚
â”‚  1ë²ˆì§¸ í˜¸ì¶œ â†’ ê°’1                                              â”‚
â”‚  2ë²ˆì§¸ í˜¸ì¶œ â†’ ê°’2                                              â”‚
â”‚  3ë²ˆì§¸ í˜¸ì¶œ â†’ ê°’3                                              â”‚
â”‚  ...                                                           â”‚
â”‚                                                                â”‚
â”‚  ì‚¬ìš© ìƒí™©:                                                    â”‚
â”‚  â€¢ ì¬ì‹œë„ ë¡œì§ í…ŒìŠ¤íŠ¸                                          â”‚
â”‚  â€¢ ìƒíƒœ ë³€í™” ì‹œë®¬ë ˆì´ì…˜                                        â”‚
â”‚  â€¢ í˜ì´ì§• í…ŒìŠ¤íŠ¸                                               â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 53.2: SetupSequence ì‚¬ìš© ì˜ˆì‹œ

```csharp
[Test]
public void RetryLogic_FirstFailsThenSucceeds()
{
    // Arrange - ì²« ë²ˆì§¸ëŠ” ì‹¤íŒ¨, ë‘ ë²ˆì§¸ëŠ” ì„±ê³µ
    _mockRepository
        .SetupSequence(x => x.GetById(1))
        .Returns((User)null)                              // 1ë²ˆì§¸ í˜¸ì¶œ: null
        .Returns(new User { Id = 1, Name = "í™ê¸¸ë™" });   // 2ë²ˆì§¸ í˜¸ì¶œ: User
    
    // Act
    var result1 = _mockRepository.Object.GetById(1);
    var result2 = _mockRepository.Object.GetById(1);
    
    // Assert
    Assert.IsNull(result1);           // ì²« ë²ˆì§¸ í˜¸ì¶œ ê²°ê³¼
    Assert.IsNotNull(result2);        // ë‘ ë²ˆì§¸ í˜¸ì¶œ ê²°ê³¼
    Assert.AreEqual("í™ê¸¸ë™", result2.Name);
}

[Test]
public void RetryLogic_ThrowsThenSucceeds()
{
    // Arrange - ì²« ë²ˆì§¸ëŠ” ì˜ˆì™¸, ë‘ ë²ˆì§¸ëŠ” ì„±ê³µ
    _mockEmailService
        .SetupSequence(x => x.SendEmail(
            It.IsAny<string>(), 
            It.IsAny<string>(), 
            It.IsAny<string>()))
        .Throws(new Exception("ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜"))  // 1ë²ˆì§¸: ì˜ˆì™¸
        .Returns(true);                          // 2ë²ˆì§¸: ì„±ê³µ
    
    // Act - ì²« ë²ˆì§¸ í˜¸ì¶œ (ì˜ˆì™¸)
    Assert.Throws<Exception>(() => 
        _mockEmailService.Object.SendEmail("to", "subject", "body"));
    
    // ë‘ ë²ˆì§¸ í˜¸ì¶œ (ì„±ê³µ)
    var result = _mockEmailService.Object.SendEmail("to", "subject", "body");
    
    // Assert
    Assert.IsTrue(result);
}
```

---

## 54. Protected ë©¤ë²„ Mock

### Step 54.1: Protected ë©”ì„œë“œ Mock

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Protected ë©¤ë²„ Mock                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  ì¶”ìƒ í´ë˜ìŠ¤ì˜ protected ë©”ì„œë“œë¥¼ Mockí•  ë•Œ ì‚¬ìš©               â”‚
â”‚                                                                â”‚
â”‚  Moq.Protected ë„¤ì„ìŠ¤í˜ì´ìŠ¤ í•„ìš”                               â”‚
â”‚  using Moq.Protected;                                          â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 54.2: Protected Mock ì˜ˆì‹œ

```csharp
using Moq.Protected;

// ì¶”ìƒ í´ë˜ìŠ¤
public abstract class BaseService
{
    protected abstract bool ValidateInput(string input);
    
    public bool ProcessInput(string input)
    {
        if (!ValidateInput(input))
            return false;
        
        // ì²˜ë¦¬ ë¡œì§...
        return true;
    }
}

// í…ŒìŠ¤íŠ¸
[Test]
public void ProcessInput_ValidInput_ReturnsTrue()
{
    // Arrange
    var mockService = new Mock<BaseService>();
    
    // Protected ë©”ì„œë“œ Setup
    mockService
        .Protected()
        .Setup<bool>("ValidateInput", ItExpr.IsAny<string>())
        .Returns(true);
    
    // Act
    var result = mockService.Object.ProcessInput("test");
    
    // Assert
    Assert.IsTrue(result);
}
```

---

## 55. Properties Mock

### Step 55.1: ì†ì„± Setup

```csharp
public interface IConfiguration
{
    string ConnectionString { get; set; }
    int Timeout { get; }
    bool IsEnabled { get; set; }
}

[Test]
public void Property_GetAndSet()
{
    // Arrange
    var mockConfig = new Mock<IConfiguration>();
    
    // ì½ê¸° ì „ìš© ì†ì„± Setup
    mockConfig.Setup(x => x.Timeout).Returns(30);
    
    // ì½ê¸°/ì“°ê¸° ì†ì„± Setup
    mockConfig.SetupProperty(x => x.ConnectionString, "Server=localhost");
    mockConfig.SetupProperty(x => x.IsEnabled, true);
    
    // Act & Assert - Get
    Assert.AreEqual(30, mockConfig.Object.Timeout);
    Assert.AreEqual("Server=localhost", mockConfig.Object.ConnectionString);
    Assert.IsTrue(mockConfig.Object.IsEnabled);
    
    // Act - Set (SetupPropertyë¡œ ì„¤ì •ëœ ì†ì„±ë§Œ ê°€ëŠ¥)
    mockConfig.Object.ConnectionString = "Server=prod";
    mockConfig.Object.IsEnabled = false;
    
    // Assert
    Assert.AreEqual("Server=prod", mockConfig.Object.ConnectionString);
    Assert.IsFalse(mockConfig.Object.IsEnabled);
}

[Test]
public void Property_SetupAllProperties()
{
    // Arrange - ëª¨ë“  ì†ì„±ì„ ì¶”ì  ê°€ëŠ¥í•˜ê²Œ ì„¤ì •
    var mockConfig = new Mock<IConfiguration>();
    mockConfig.SetupAllProperties();
    
    // Act
    mockConfig.Object.ConnectionString = "test";
    mockConfig.Object.IsEnabled = true;
    
    // Assert
    Assert.AreEqual("test", mockConfig.Object.ConnectionString);
    Assert.IsTrue(mockConfig.Object.IsEnabled);
}
```

---

## 56. Events Mock

### Step 56.1: ì´ë²¤íŠ¸ ë°œìƒ ì‹œë®¬ë ˆì´ì…˜

```csharp
public interface INotificationService
{
    event EventHandler<string> NotificationReceived;
    void Subscribe();
}

[Test]
public void Event_RaiseNotification()
{
    // Arrange
    var mockNotification = new Mock<INotificationService>();
    string receivedMessage = null;
    
    // ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë“±ë¡
    mockNotification.Object.NotificationReceived += (sender, message) =>
    {
        receivedMessage = message;
    };
    
    // Act - ì´ë²¤íŠ¸ ë°œìƒ ì‹œë®¬ë ˆì´ì…˜
    mockNotification.Raise(
        x => x.NotificationReceived += null, 
        mockNotification.Object, 
        "ìƒˆ ì•Œë¦¼ì…ë‹ˆë‹¤");
    
    // Assert
    Assert.AreEqual("ìƒˆ ì•Œë¦¼ì…ë‹ˆë‹¤", receivedMessage);
}
```

---

# Part 10: ì „ì²´ ì½”ë“œ ì •ë¦¬

---

## 57. í”„ë¡œë•ì…˜ ì½”ë“œ ìµœì¢…ë³¸

### Step 57.1: í”„ë¡œì íŠ¸ êµ¬ì¡°

```
UserManagement/
â”œâ”€â”€ Interfaces/
â”‚   â”œâ”€â”€ IDataRepository.cs
â”‚   â”œâ”€â”€ IEmailService.cs
â”‚   â””â”€â”€ ILogger.cs
â”œâ”€â”€ Models/
â”‚   â””â”€â”€ User.cs
â””â”€â”€ Services/
    â””â”€â”€ UserService.cs
```

### Step 57.2: IDataRepository.cs

```csharp
using System.Collections.Generic;
using UserManagement.Models;

namespace UserManagement.Interfaces
{
    public interface IDataRepository
    {
        User GetById(int id);
        IEnumerable<User> GetAll();
        User GetByEmail(string email);
        User Save(User user);
        bool Update(User user);
        bool Delete(int id);
        bool ExistsByEmail(string email);
    }
}
```

### Step 57.3: IEmailService.cs

```csharp
using System.Threading.Tasks;

namespace UserManagement.Interfaces
{
    public interface IEmailService
    {
        bool SendEmail(string to, string subject, string body);
        Task<bool> SendEmailAsync(string to, string subject, string body);
        bool SendWelcomeEmail(string to, string userName);
        bool SendPasswordResetEmail(string to, string resetToken);
    }
}
```

### Step 57.4: ILogger.cs

```csharp
using System;

namespace UserManagement.Interfaces
{
    public interface ILogger
    {
        void LogInfo(string message);
        void LogWarning(string message);
        void LogError(string message);
        void LogError(string message, Exception exception);
        void LogDebug(string message);
    }
}
```

### Step 57.5: User.cs

```csharp
using System;

namespace UserManagement.Models
{
    public class User
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Email { get; set; }
        public string PasswordHash { get; set; }
        public bool IsActive { get; set; }
        public DateTime CreatedAt { get; set; }
        public DateTime? UpdatedAt { get; set; }
        public DateTime? LastLoginAt { get; set; }
    }
}
```

### Step 57.6: UserService.cs

```csharp
using System;
using UserManagement.Interfaces;
using UserManagement.Models;

namespace UserManagement.Services
{
    public class UserService
    {
        private readonly IDataRepository _repository;
        private readonly IEmailService _emailService;
        private readonly ILogger _logger;
        
        public UserService(
            IDataRepository repository, 
            IEmailService emailService, 
            ILogger logger)
        {
            _repository = repository ?? throw new ArgumentNullException(nameof(repository));
            _emailService = emailService ?? throw new ArgumentNullException(nameof(emailService));
            _logger = logger ?? throw new ArgumentNullException(nameof(logger));
        }
        
        public User GetUserById(int id)
        {
            _logger.LogInfo($"ì‚¬ìš©ì ì¡°íšŒ ì‹œì‘: ID={id}");
            
            try
            {
                var user = _repository.GetById(id);
                
                if (user == null)
                {
                    _logger.LogWarning($"ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ: ID={id}");
                    return null;
                }
                
                _logger.LogInfo($"ì‚¬ìš©ì ì¡°íšŒ ì„±ê³µ: ID={id}, Name={user.Name}");
                return user;
            }
            catch (Exception ex)
            {
                _logger.LogError($"ì‚¬ìš©ì ì¡°íšŒ ì‹¤íŒ¨: ID={id}", ex);
                throw;
            }
        }
        
        public User CreateUser(User user)
        {
            if (user == null)
                throw new ArgumentNullException(nameof(user));
            
            _logger.LogInfo($"ì‚¬ìš©ì ìƒì„± ì‹œì‘: Email={user.Email}");
            
            if (_repository.ExistsByEmail(user.Email))
            {
                _logger.LogWarning($"ì´ë©”ì¼ ì¤‘ë³µ: {user.Email}");
                throw new InvalidOperationException($"ì´ë©”ì¼ì´ ì´ë¯¸ ì¡´ì¬í•©ë‹ˆë‹¤: {user.Email}");
            }
            
            try
            {
                user.CreatedAt = DateTime.Now;
                user.IsActive = true;
                
                var savedUser = _repository.Save(user);
                _logger.LogInfo($"ì‚¬ìš©ì ì €ì¥ ì™„ë£Œ: ID={savedUser.Id}");
                
                var emailSent = _emailService.SendWelcomeEmail(savedUser.Email, savedUser.Name);
                
                if (emailSent)
                    _logger.LogInfo($"í™˜ì˜ ì´ë©”ì¼ ë°œì†¡ ì™„ë£Œ: {savedUser.Email}");
                else
                    _logger.LogWarning($"í™˜ì˜ ì´ë©”ì¼ ë°œì†¡ ì‹¤íŒ¨: {savedUser.Email}");
                
                return savedUser;
            }
            catch (Exception ex)
            {
                _logger.LogError($"ì‚¬ìš©ì ìƒì„± ì‹¤íŒ¨: {user.Email}", ex);
                throw;
            }
        }
        
        public bool DeleteUser(int id)
        {
            _logger.LogInfo($"ì‚¬ìš©ì ì‚­ì œ ì‹œì‘: ID={id}");
            
            var user = _repository.GetById(id);
            
            if (user == null)
            {
                _logger.LogWarning($"ì‚­ì œí•  ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ: ID={id}");
                return false;
            }
            
            try
            {
                var result = _repository.Delete(id);
                
                if (result)
                    _logger.LogInfo($"ì‚¬ìš©ì ì‚­ì œ ì™„ë£Œ: ID={id}");
                else
                    _logger.LogWarning($"ì‚¬ìš©ì ì‚­ì œ ì‹¤íŒ¨: ID={id}");
                
                return result;
            }
            catch (Exception ex)
            {
                _logger.LogError($"ì‚¬ìš©ì ì‚­ì œ ì¤‘ ì˜¤ë¥˜: ID={id}", ex);
                throw;
            }
        }
    }
}
```

---

## 58. í…ŒìŠ¤íŠ¸ ì½”ë“œ ìµœì¢…ë³¸

### Step 58.1: UserServiceTests.cs

```csharp
using System;
using Moq;
using NUnit.Framework;
using UserManagement.Interfaces;
using UserManagement.Models;
using UserManagement.Services;

namespace UserManagement.Tests
{
    [TestFixture]
    public class UserServiceTests
    {
        #region Fields and Setup
        
        private Mock<IDataRepository> _mockRepository;
        private Mock<IEmailService> _mockEmailService;
        private Mock<ILogger> _mockLogger;
        private UserService _userService;
        
        [SetUp]
        public void SetUp()
        {
            _mockRepository = new Mock<IDataRepository>();
            _mockEmailService = new Mock<IEmailService>();
            _mockLogger = new Mock<ILogger>();
            
            _userService = new UserService(
                _mockRepository.Object,
                _mockEmailService.Object,
                _mockLogger.Object);
        }
        
        #endregion
        
        #region GetUserById Tests
        
        [Test]
        public void GetUserById_ExistingUser_ReturnsUser()
        {
            // Arrange
            var expectedUser = new User 
            { 
                Id = 1, 
                Name = "í™ê¸¸ë™", 
                Email = "hong@test.com" 
            };
            
            _mockRepository
                .Setup(x => x.GetById(1))
                .Returns(expectedUser);
            
            // Act
            var result = _userService.GetUserById(1);
            
            // Assert
            Assert.IsNotNull(result);
            Assert.AreEqual(1, result.Id);
            Assert.AreEqual("í™ê¸¸ë™", result.Name);
        }
        
        [Test]
        public void GetUserById_NonExistingUser_ReturnsNull()
        {
            // Arrange
            _mockRepository
                .Setup(x => x.GetById(999))
                .Returns((User)null);
            
            // Act
            var result = _userService.GetUserById(999);
            
            // Assert
            Assert.IsNull(result);
        }
        
        [Test]
        public void GetUserById_NonExistingUser_LogsWarning()
        {
            // Arrange
            _mockRepository.Setup(x => x.GetById(999)).Returns((User)null);
            
            // Act
            _userService.GetUserById(999);
            
            // Assert
            _mockLogger.Verify(
                x => x.LogWarning(It.Is<string>(s => s.Contains("ì°¾ì„ ìˆ˜ ì—†ìŒ"))), 
                Times.Once());
        }
        
        [Test]
        public void GetUserById_RepositoryThrows_LogsErrorAndRethrows()
        {
            // Arrange
            _mockRepository
                .Setup(x => x.GetById(It.IsAny<int>()))
                .Throws(new InvalidOperationException("DB ì˜¤ë¥˜"));
            
            // Act & Assert
            Assert.Throws<InvalidOperationException>(() => 
                _userService.GetUserById(1));
            
            _mockLogger.Verify(
                x => x.LogError(It.IsAny<string>(), It.IsAny<Exception>()), 
                Times.Once());
        }
        
        #endregion
        
        #region CreateUser Tests
        
        [Test]
        public void CreateUser_ValidUser_ReturnsCreatedUser()
        {
            // Arrange
            var newUser = new User { Name = "í™ê¸¸ë™", Email = "hong@test.com" };
            
            _mockRepository
                .Setup(x => x.ExistsByEmail("hong@test.com"))
                .Returns(false);
            
            _mockRepository
                .Setup(x => x.Save(It.IsAny<User>()))
                .Returns((User u) => { u.Id = 1; return u; });
            
            _mockEmailService
                .Setup(x => x.SendWelcomeEmail(It.IsAny<string>(), It.IsAny<string>()))
                .Returns(true);
            
            // Act
            var result = _userService.CreateUser(newUser);
            
            // Assert
            Assert.IsNotNull(result);
            Assert.AreEqual(1, result.Id);
            Assert.IsTrue(result.IsActive);
        }
        
        [Test]
        public void CreateUser_NullUser_ThrowsArgumentNullException()
        {
            // Act & Assert
            Assert.Throws<ArgumentNullException>(() => 
                _userService.CreateUser(null));
        }
        
        [Test]
        public void CreateUser_DuplicateEmail_ThrowsInvalidOperationException()
        {
            // Arrange
            var newUser = new User { Name = "í™ê¸¸ë™", Email = "existing@test.com" };
            
            _mockRepository
                .Setup(x => x.ExistsByEmail("existing@test.com"))
                .Returns(true);
            
            // Act & Assert
            var ex = Assert.Throws<InvalidOperationException>(() => 
                _userService.CreateUser(newUser));
            
            Assert.That(ex.Message, Does.Contain("ì´ë©”ì¼ì´ ì´ë¯¸ ì¡´ì¬í•©ë‹ˆë‹¤"));
        }
        
        [Test]
        public void CreateUser_DuplicateEmail_DoesNotSave()
        {
            // Arrange
            var newUser = new User { Name = "í™ê¸¸ë™", Email = "existing@test.com" };
            
            _mockRepository
                .Setup(x => x.ExistsByEmail("existing@test.com"))
                .Returns(true);
            
            // Act
            Assert.Throws<InvalidOperationException>(() => 
                _userService.CreateUser(newUser));
            
            // Assert
            _mockRepository.Verify(
                x => x.Save(It.IsAny<User>()), 
                Times.Never());
        }
        
        [Test]
        public void CreateUser_Success_SendsWelcomeEmail()
        {
            // Arrange
            var newUser = new User { Name = "í™ê¸¸ë™", Email = "hong@test.com" };
            
            _mockRepository.Setup(x => x.ExistsByEmail(It.IsAny<string>())).Returns(false);
            _mockRepository.Setup(x => x.Save(It.IsAny<User>()))
                .Returns((User u) => { u.Id = 1; return u; });
            _mockEmailService.Setup(x => x.SendWelcomeEmail(It.IsAny<string>(), It.IsAny<string>()))
                .Returns(true);
            
            // Act
            _userService.CreateUser(newUser);
            
            // Assert
            _mockEmailService.Verify(
                x => x.SendWelcomeEmail("hong@test.com", "í™ê¸¸ë™"), 
                Times.Once());
        }
        
        [Test]
        public void CreateUser_EmailFailure_StillReturnsUser()
        {
            // Arrange
            var newUser = new User { Name = "í™ê¸¸ë™", Email = "hong@test.com" };
            
            _mockRepository.Setup(x => x.ExistsByEmail(It.IsAny<string>())).Returns(false);
            _mockRepository.Setup(x => x.Save(It.IsAny<User>()))
                .Returns((User u) => { u.Id = 1; return u; });
            _mockEmailService.Setup(x => x.SendWelcomeEmail(It.IsAny<string>(), It.IsAny<string>()))
                .Returns(false);  // ì´ë©”ì¼ ë°œì†¡ ì‹¤íŒ¨
            
            // Act
            var result = _userService.CreateUser(newUser);
            
            // Assert - ì´ë©”ì¼ ì‹¤íŒ¨í•´ë„ ì‚¬ìš©ìëŠ” ìƒì„±ë¨
            Assert.IsNotNull(result);
            Assert.AreEqual(1, result.Id);
        }
        
        #endregion
        
        #region DeleteUser Tests
        
        [Test]
        public void DeleteUser_ExistingUser_ReturnsTrue()
        {
            // Arrange
            var user = new User { Id = 1, Name = "í™ê¸¸ë™" };
            
            _mockRepository.Setup(x => x.GetById(1)).Returns(user);
            _mockRepository.Setup(x => x.Delete(1)).Returns(true);
            
            // Act
            var result = _userService.DeleteUser(1);
            
            // Assert
            Assert.IsTrue(result);
        }
        
        [Test]
        public void DeleteUser_NonExistingUser_ReturnsFalse()
        {
            // Arrange
            _mockRepository.Setup(x => x.GetById(999)).Returns((User)null);
            
            // Act
            var result = _userService.DeleteUser(999);
            
            // Assert
            Assert.IsFalse(result);
        }
        
        [Test]
        public void DeleteUser_NonExistingUser_DoesNotCallDelete()
        {
            // Arrange
            _mockRepository.Setup(x => x.GetById(999)).Returns((User)null);
            
            // Act
            _userService.DeleteUser(999);
            
            // Assert
            _mockRepository.Verify(
                x => x.Delete(It.IsAny<int>()), 
                Times.Never());
        }
        
        #endregion
        
        #region Logging Tests
        
        [Test]
        public void GetUserById_Success_LogsInfoTwice()
        {
            // Arrange
            var user = new User { Id = 1, Name = "í™ê¸¸ë™" };
            _mockRepository.Setup(x => x.GetById(1)).Returns(user);
            
            // Act
            _userService.GetUserById(1);
            
            // Assert
            _mockLogger.Verify(
                x => x.LogInfo(It.IsAny<string>()), 
                Times.Exactly(2));
        }
        
        [Test]
        public void CreateUser_Success_LogsMultipleTimes()
        {
            // Arrange
            var newUser = new User { Name = "í™ê¸¸ë™", Email = "hong@test.com" };
            
            _mockRepository.Setup(x => x.ExistsByEmail(It.IsAny<string>())).Returns(false);
            _mockRepository.Setup(x => x.Save(It.IsAny<User>()))
                .Returns((User u) => { u.Id = 1; return u; });
            _mockEmailService.Setup(x => x.SendWelcomeEmail(It.IsAny<string>(), It.IsAny<string>()))
                .Returns(true);
            
            // Act
            _userService.CreateUser(newUser);
            
            // Assert
            _mockLogger.Verify(
                x => x.LogInfo(It.IsAny<string>()), 
                Times.AtLeast(3));
        }
        
        #endregion
    }
}
```

---

## 59. ìš”ì•½ ë° ì²´í¬ë¦¬ìŠ¤íŠ¸

### í•™ìŠµ ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… í•™ìŠµ ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  Part 1: í…ŒìŠ¤íŠ¸ ë”ë¸” ê°œë…                                      â”‚
â”‚  â˜‘ ì™¸ë¶€ ì˜ì¡´ì„±ê³¼ ë¬¸ì œì  ì´í•´                                  â”‚
â”‚  â˜‘ í…ŒìŠ¤íŠ¸ ë”ë¸”ì˜ ì¢…ë¥˜ (Dummy, Stub, Spy, Mock, Fake)          â”‚
â”‚  â˜‘ Mockê³¼ Stubì˜ ì°¨ì´ì  ì´í•´                                  â”‚
â”‚                                                                â”‚
â”‚  Part 2: í”„ë¡œì íŠ¸ ì„¤ì •                                         â”‚
â”‚  â˜‘ NuGetìœ¼ë¡œ Moq íŒ¨í‚¤ì§€ ì„¤ì¹˜                                  â”‚
â”‚  â˜‘ í”„ë¡œì íŠ¸ ì°¸ì¡° ì„¤ì •                                         â”‚
â”‚                                                                â”‚
â”‚  Part 3-4: ì¸í„°í˜ì´ìŠ¤ ë° ì„œë¹„ìŠ¤ êµ¬í˜„                           â”‚
â”‚  â˜‘ ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ ì„¤ê³„                                       â”‚
â”‚  â˜‘ ì˜ì¡´ì„± ì£¼ì… (ìƒì„±ì ì£¼ì…)                                  â”‚
â”‚  â˜‘ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ ì½”ë“œ ì‘ì„±                                    â”‚
â”‚                                                                â”‚
â”‚  Part 5: Moq ê¸°ë³¸ ì‚¬ìš©ë²•                                       â”‚
â”‚  â˜‘ Mock<T> ì„ ì–¸ ë° ìƒì„±                                       â”‚
â”‚  â˜‘ Setup() ë©”ì„œë“œ                                             â”‚
â”‚  â˜‘ Returns() ë©”ì„œë“œ                                           â”‚
â”‚  â˜‘ .Object ì†ì„±                                               â”‚
â”‚                                                                â”‚
â”‚  Part 6: Setup ì‹¬í™”                                            â”‚
â”‚  â˜‘ It.IsAny<T>() ì‚¬ìš©ë²•                                       â”‚
â”‚  â˜‘ It.Is<T>(ì¡°ê±´) ì‚¬ìš©ë²•                                      â”‚
â”‚  â˜‘ Callback() ì‚¬ìš©ë²•                                          â”‚
â”‚  â˜‘ Throws() ì˜ˆì™¸ ì„¤ì •                                         â”‚
â”‚  â˜‘ ReturnsAsync() ë¹„ë™ê¸° ì„¤ì •                                 â”‚
â”‚                                                                â”‚
â”‚  Part 7: Verify ê²€ì¦                                           â”‚
â”‚  â˜‘ Verify() ê¸°ë³¸ ì‚¬ìš©ë²•                                       â”‚
â”‚  â˜‘ Times.Once(), Times.Never()                                â”‚
â”‚  â˜‘ Times.Exactly(n), Times.AtLeast(n)                         â”‚
â”‚  â˜‘ VerifyAll(), VerifyNoOtherCalls()                          â”‚
â”‚                                                                â”‚
â”‚  Part 8: ì‹¤ì „ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤                                  â”‚
â”‚  â˜‘ ë°ì´í„°ë² ì´ìŠ¤ ì˜ì¡´ì„± ê²©ë¦¬                                   â”‚
â”‚  â˜‘ API í˜¸ì¶œ ì˜ì¡´ì„± ê²©ë¦¬                                       â”‚
â”‚  â˜‘ ì´ë©”ì¼/ë¡œê¹… ì˜ì¡´ì„± ê²©ë¦¬                                    â”‚
â”‚  â˜‘ ë³µí•© ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸                                       â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Moq ì£¼ìš” ë©”ì„œë“œ ìš”ì•½

| ë©”ì„œë“œ | ìš©ë„ | ì˜ˆì‹œ |
|--------|------|------|
| `Setup()` | ë©”ì„œë“œ ë™ì‘ ì •ì˜ | `.Setup(x => x.GetById(1))` |
| `Returns()` | ë°˜í™˜ê°’ ì„¤ì • | `.Returns(user)` |
| `ReturnsAsync()` | ë¹„ë™ê¸° ë°˜í™˜ê°’ | `.ReturnsAsync(true)` |
| `Throws()` | ì˜ˆì™¸ ë°œìƒ | `.Throws(new Exception())` |
| `Callback()` | ì½œë°± ì‹¤í–‰ | `.Callback(() => count++)` |
| `Verify()` | í˜¸ì¶œ ê²€ì¦ | `.Verify(x => x.Save(), Times.Once)` |
| `VerifyAll()` | ëª¨ë“  Setup ê²€ì¦ | `mock.VerifyAll()` |
| `SetupSequence()` | ìˆœì°¨ì  ë°˜í™˜ | `.SetupSequence(...).Returns(1).Returns(2)` |
| `.Object` | ì‹¤ì œ ê°ì²´ íšë“ | `mock.Object` |

### It ë§¤ì²˜ ìš”ì•½

| ë§¤ì²˜ | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|
| `It.IsAny<T>()` | ì–´ë–¤ ê°’ì´ë“  | `It.IsAny<int>()` |
| `It.Is<T>(ì¡°ê±´)` | ì¡°ê±´ ë§Œì¡± | `It.Is<int>(x => x > 0)` |
| `It.IsIn<T>(...)` | ëª©ë¡ì— í¬í•¨ | `It.IsIn(1, 2, 3)` |
| `It.IsNotIn<T>(...)` | ëª©ë¡ì— ë¯¸í¬í•¨ | `It.IsNotIn(0, -1)` |
| `It.IsRegex()` | ì •ê·œì‹ ë§¤ì¹­ | `It.IsRegex(@"\d+")` |

### Times ì˜µì…˜ ìš”ì•½

| ì˜µì…˜ | ì„¤ëª… |
|------|------|
| `Times.Once()` | ì •í™•íˆ 1ë²ˆ |
| `Times.Never()` | 0ë²ˆ |
| `Times.Exactly(n)` | ì •í™•íˆ në²ˆ |
| `Times.AtLeast(n)` | ìµœì†Œ në²ˆ |
| `Times.AtMost(n)` | ìµœëŒ€ në²ˆ |
| `Times.AtLeastOnce()` | ìµœì†Œ 1ë²ˆ |
| `Times.Between(m,n,Range)` | m~në²ˆ ì‚¬ì´ |

---

## 60. ë‹¤ìŒ ë‹¨ê³„

### ì¶”ê°€ í•™ìŠµ ê¶Œì¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¯ ë‹¤ìŒ ë‹¨ê³„ í•™ìŠµ ê¶Œì¥                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  1. NSubstitute í•™ìŠµ                                           â”‚
â”‚     â€¢ Moqì˜ ëŒ€ì•ˆ ë¼ì´ë¸ŒëŸ¬ë¦¬                                   â”‚
â”‚     â€¢ ë” ê°„ê²°í•œ ë¬¸ë²•                                          â”‚
â”‚                                                                â”‚
â”‚  2. í†µí•© í…ŒìŠ¤íŠ¸                                                â”‚
â”‚     â€¢ ì‹¤ì œ DBë¥¼ ì‚¬ìš©í•œ í…ŒìŠ¤íŠ¸                                 â”‚
â”‚     â€¢ TestContainers í™œìš©                                     â”‚
â”‚                                                                â”‚
â”‚  3. AutoMock ë¼ì´ë¸ŒëŸ¬ë¦¬                                        â”‚
â”‚     â€¢ ìë™ Mock ìƒì„±                                          â”‚
â”‚     â€¢ AutoFixture + AutoMoq                                   â”‚
â”‚                                                                â”‚
â”‚  4. í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ì¸¡ì •                                       â”‚
â”‚     â€¢ Coverlet                                                â”‚
â”‚     â€¢ ReportGenerator                                         â”‚
â”‚                                                                â”‚
â”‚  5. BDD ìŠ¤íƒ€ì¼ í…ŒìŠ¤íŠ¸                                          â”‚
â”‚     â€¢ SpecFlow                                                â”‚
â”‚     â€¢ Given-When-Then íŒ¨í„´                                    â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

# ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤!

Moqë¥¼ í™œìš©í•œ ì™¸ë¶€ ì˜ì¡´ì„± ì²˜ë¦¬ ì‹¤ìŠµì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤!

ì´ì œ ì—¬ëŸ¬ë¶„ì€:
- í…ŒìŠ¤íŠ¸ ë”ë¸”ì˜ ê°œë…ì„ ì´í•´í•˜ê³ 
- Moqë¡œ Mock ê°ì²´ë¥¼ ìƒì„±í•˜ë©°
- Setupìœ¼ë¡œ ë™ì‘ì„ ì •ì˜í•˜ê³ 
- Verifyë¡œ í–‰ìœ„ë¥¼ ê²€ì¦í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì‹¤ì œ í”„ë¡œì íŠ¸ì— ì ìš©í•˜ë©° ì—°ìŠµí•˜ì„¸ìš”!

---

**ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤! ğŸ‰**
